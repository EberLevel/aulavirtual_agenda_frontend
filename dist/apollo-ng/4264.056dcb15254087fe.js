"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[4264],{4264:(P,p,n)=>{n.r(p),n.d(p,{ConfiguracionEmpresaModule:()=>H});var s=n(9417),h=n(612),f=n(6781),c=n(1141),v=n(563),C=n(2242),x=n(1305),I=n(8150),E=n(9998),j=n(6653),t=n(7019),S=n(3088),y=n(8774),G=n(6554),b=n(5779),g=n(320),F=n(177),m=n(5473);function R(o,l){1&o&&(t.j41(0,"label",11),t.EFF(1,"Nombre de la instituci\xf3n"),t.k0s())}function T(o,l){if(1&o){const i=t.RV6();t.j41(0,"div",12)(1,"span",13),t.nrm(2,"i",14),t.k0s(),t.j41(3,"p-fileUpload",15),t.bIt("onSelect",function(a){t.eBV(i);const r=t.XpG(2);return t.Njj(r.onLogoSelect(a))}),t.k0s()()}2&o&&(t.R7$(3),t.Y8G("auto",!0))}function B(o,l){if(1&o){const i=t.RV6();t.j41(0,"div",16),t.nrm(1,"img",17),t.j41(2,"button",18),t.bIt("click",function(){t.eBV(i);const a=t.XpG(2);return t.Njj(a.actualizarLogo())}),t.k0s()()}if(2&o){const i=t.XpG(2);t.R7$(1),t.Y8G("src",i.logoActual,t.B4B)}}function M(o,l){if(1&o){const i=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"span",3),t.nrm(3,"i",4),t.j41(4,"input",5),t.bIt("ngModelChange",function(a){t.eBV(i);const r=t.XpG();return t.Njj(r.nombreInstitucion=a)}),t.k0s(),t.DNE(5,R,2,0,"label",6),t.k0s()(),t.j41(6,"div",2),t.DNE(7,T,4,1,"div",7),t.DNE(8,B,3,1,"div",8),t.k0s()(),t.j41(9,"div",9)(10,"button",10),t.bIt("click",function(){t.eBV(i);const a=t.XpG();return t.Njj(a.saveCompany())}),t.k0s()()}if(2&o){const i=t.XpG();t.R7$(4),t.Y8G("ngModel",i.nombreInstitucion),t.R7$(1),t.Y8G("ngIf",!i.nombreInstitucion),t.R7$(2),t.Y8G("ngIf",!i.logoActual),t.R7$(1),t.Y8G("ngIf",i.logoActual),t.R7$(2),t.Y8G("disabled",!i.nombreInstitucion)}}let N=(()=>{class o{constructor(i,e,a){this.generalService=i,this.helpersService=e,this.spinner=a,this.nombreInstitucion="",this.logoActual=null,this.logoFile=null,this.domain_id=0,this.loading=!1,this.domain_id=this.helpersService.getDominioId()}ngOnInit(){this.getCompany()}getCompany(){this.spinner.show(),this.loading=!0,this.generalService.getCompany(this.domain_id).subscribe(i=>{this.nombreInstitucion=i.data.name,this.logoActual=i.data.logo_url,this.loading=!1,this.spinner.hide()},i=>{this.helpersService.showErrorMessage("Error al obtener la instituci\xf3n"),this.loading=!1,this.spinner.hide()})}saveCompany(){const i=new FormData;i.append("nombreInstitucion",this.nombreInstitucion),i.append("domain_id",this.domain_id.toString()),this.logoFile&&i.append("logo",this.logoFile),this.spinner.show(),this.loading=!0,this.generalService.saveCompany(i).subscribe(e=>{this.helpersService.showSuccessMessage("Instituci\xf3n actualizada correctamente"),window.location.reload(),this.loading=!1,this.spinner.hide()},e=>{this.helpersService.showErrorMessage("Error al actualizar la instituci\xf3n"),this.loading=!1,this.spinner.hide()})}onLogoSelect(i){this.logoFile=i.files[0];const e=new FileReader;e.onload=a=>{this.logoActual=a.target.result},this.logoFile&&e.readAsDataURL(this.logoFile)}actualizarLogo(){this.logoActual=null,this.logoFile=null}static#t=this.\u0275fac=function(e){return new(e||o)(t.rXU(S.O),t.rXU(y.V),t.rXU(G.ex))};static#n=this.\u0275cmp=t.VBU({type:o,selectors:[["app-configuracion-empresa"]],decls:2,vars:0,consts:[["pTemplate","content"],[1,"grid","p-fluid"],[1,"field","col-12","md:col-6"],[1,"p-float-label","p-input-icon-left","w-full"],[1,"pi","pi-building"],["type","text","id","institucion","pInputText","",1,"w-full","p-inputtext","p-component","p-element","ng-pristine",3,"ngModel","ngModelChange"],["for","institucion",4,"ngIf"],["class","p-inputgroup",4,"ngIf"],["class","flex align-items-center",4,"ngIf"],[1,"flex","justify-center","mt-4"],["pButton","","type","button","label","Guardar",1,"p-button-success","mr-2",3,"disabled","click"],["for","institucion"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-image"],["mode","basic","chooseLabel","Seleccionar logo","name","logo","accept","image/*","styleClass","p-button-secondary",3,"auto","onSelect"],[1,"flex","align-items-center"],["alt","Logo actual",1,"mr-3",2,"max-width","100px","max-height","100px",3,"src"],["pButton","","type","button","icon","pi pi-refresh","label","Actualizar logo",1,"p-button-secondary",3,"click"]],template:function(e,a){1&e&&(t.j41(0,"p-panel"),t.DNE(1,M,11,5,"ng-template",0),t.k0s())},dependencies:[b.Ei,g.N,c._f,F.bT,m.Z,s.me,s.BC,s.vS]})}return o})();var d=n(8763),V=n(9664),X=n(4799),A=n(7835),D=n(2100),u=n(1142),U=n(6296),Y=n(1579),$=n(4714),L=n(9266),z=n(9280),O=n(3973),Z=n(8542);let H=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.$C({type:o});static#i=this.\u0275inj=t.G2t({providers:[j.U],imports:[d.iI.forChild([{path:"",component:N}]),d.iI,m.b,s.YN,u.sv,h.rO,z.bG,$.wZ,c.tm,L.SW,s.X1,C.u,x.f,O.d0,v.Z,U.iV,I.kr,Y.d,E.MB,A.H,g.e,Z.S,X.F,u.sv,f.P,D.k_,V.h]})}return o})()}}]);