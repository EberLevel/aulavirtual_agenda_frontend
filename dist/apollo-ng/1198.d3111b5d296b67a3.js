"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[1198],{1198:(F,m,e)=>{e.r(m),e.d(m,{LoginModule:()=>B});var g=e(177),c=e(8763),v=e(8032),s=e.n(v),t=e(7019),y=e(7693),f=e(3587),C=e(1626);let M=(()=>{class i{constructor(n){this.http=n,this.baseUrl=`${f.c.API_BASE}`,this.urlparametro=`${f.c.API_BASE}`}loginUser(n){return this.http.post(`${this.baseUrl}login`,n)}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(C.Qq))};static#i=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var d=e(6554),u=e(1141),h=e(2242),a=e(9417),x=e(8526);function I(i,L){1&i&&t.nrm(0,"ngx-spinner",25)}let w=(()=>{class i{constructor(n,o,r,l){this.layoutService=n,this.router=o,this.loginService=r,this.spinner=l,this.loading=!1,this.rememberMe=!1,this.identification="",this.password=""}get dark(){return"light"!==this.layoutService.config.colorScheme}ngOnInit(){this.tiporoles=[{name:"Alumno",value:1,code:"NY"},{name:"Administrador",value:2,code:"RM"},{name:"Docente",value:3,code:"LDN"}],this.checkUserIsLogged()&&this.router.navigate(["/pl-virtual"])}checkUserIsLogged(){return!!localStorage.getItem("user")}irAlLogin(){if(this.identification.trim()&&this.password.trim()){const n=new FormData;this.isEmail(this.identification)?n.append("email",this.identification):n.append("dni",this.identification),n.append("password",this.password),this.spinner.show(),this.loading=!0,this.loginService.loginUser(n).subscribe(o=>{try{if(200===o.status){this.spinner.hide(),this.loading=!1;const r=o.user;localStorage.getItem("user")&&localStorage.removeItem("user"),localStorage.setItem("user",JSON.stringify(r)),s().fire({title:"\xa1\xc9xito!",text:"Datos correctos",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{}),this.router.navigate(["/pl-virtual"])}else this.spinner.hide(),this.loading=!1,s().fire({title:"\xa1Error!",text:"Revisa los datos ingresados",icon:"error",confirmButtonText:"Aceptar"})}catch{this.spinner.hide(),this.loading=!1,s().fire({title:"\xa1Error!",text:"Revisa los datos ingresados",icon:"error",confirmButtonText:"Aceptar"})}})}else s().fire({title:"\xa1Error!",text:"Revisa los datos ingresados",icon:"error",confirmButtonText:"Aceptar"})}isEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(y.Y),t.rXU(c.Ix),t.rXU(M),t.rXU(d.ex))};static#i=this.\u0275cmp=t.VBU({type:i,selectors:[["ng-component"]],decls:32,vars:9,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1600 800","preserveAspectRatio","none",1,"fixed","left-0","top-0","min-h-screen","min-w-screen"],["width","1600","height","800"],["d","M478.4 581c3.2 0.8 6.4 1.7 9.5 2.5c196.2 52.5 388.7 133.5 593.5 176.6c174.2 36.6 349.5 29.2 518.6-10.2V0H0v574.9c52.3-17.6 106.5-27.7 161.1-30.9C268.4 537.4 375.7 554.2 478.4 581z"],["d","M181.8 259.4c98.2 6 191.9 35.2 281.3 72.1c2.8 1.1 5.5 2.3 8.3 3.4c171 71.6 342.7 158.5 531.3 207.7c198.8 51.8 403.4 40.8 597.3-14.8V0H0v283.2C59 263.6 120.6 255.7 181.8 259.4z"],["d","M454.9 86.3C600.7 177 751.6 269.3 924.1 325c208.6 67.4 431.3 60.8 637.9-5.3c12.8-4.1 25.4-8.4 38.1-12.9V0H288.1c56 21.3 108.7 50.6 159.7 82C450.2 83.4 452.5 84.9 454.9 86.3z"],["d","M1397.5 154.8c47.2-10.6 93.6-25.3 138.6-43.8c21.7-8.9 43-18.8 63.9-29.5V0H643.4c62.9 41.7 129.7 78.2 202.1 107.4C1020.4 178.1 1214.2 196.1 1397.5 154.8z"],[1,"px-5","min-h-screen","flex","justify-content-center","align-items-center"],[1,"border-1","surface-border","surface-card","border-round","py-7","px-4","md:px-7","z-1"],[1,"mb-5","text-center"],[1,"text-900","text-xl","font-bold","mb-6"],[1,"row","mb-4"],[1,"row","mb-6"],[1,"grid","p-fluid"],[1,"p-float-label","p-input-icon-left","w-full","mb-4"],[1,"pi","pi-user"],["id","identification","type","text","pInputText","",1,"w-full","md:w-25rem",3,"ngModel","ngModelChange"],["for","identification"],[1,"pi","pi-lock"],["id","password","type","password","pInputText","",1,"w-full","md:w-25rem",3,"ngModel","ngModelChange"],["for","password"],["pButton","","pRipple","","label","Ingresar",1,"w-full","mb-5",3,"click"],[1,"mt-4","text-center"],[1,"text-600","cursor-pointer","hover:text-primary","transition-colors","transition-duration-300"],["bdColor","rgba(0,0,0,0.5)","size","large","color","white","type","ball-spin",4,"ngIf"],[3,"minimal"],["bdColor","rgba(0,0,0,0.5)","size","large","color","white","type","ball-spin"]],template:function(o,r){1&o&&(t.qSk(),t.j41(0,"svg",0),t.nrm(1,"rect",1)(2,"path",2)(3,"path",3)(4,"path",4)(5,"path",5),t.k0s(),t.joV(),t.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),t.EFF(10,"Login"),t.k0s()(),t.nrm(11,"div",10),t.j41(12,"div",11)(13,"div",12)(14,"div",13),t.nrm(15,"i",14),t.j41(16,"input",15),t.bIt("ngModelChange",function(p){return r.identification=p}),t.k0s(),t.j41(17,"label",16),t.EFF(18,"Correo electr\xf3nico o DNI"),t.k0s()()()(),t.j41(19,"div",11)(20,"div",12)(21,"div",13),t.nrm(22,"i",17),t.j41(23,"input",18),t.bIt("ngModelChange",function(p){return r.password=p}),t.k0s(),t.j41(24,"label",19),t.EFF(25,"Contrase\xf1a"),t.k0s()()()(),t.j41(26,"button",20),t.bIt("click",function(){return r.irAlLogin()}),t.k0s(),t.j41(27,"div",21)(28,"a",22),t.EFF(29,"T\xe9rminos y condiciones"),t.k0s()()(),t.DNE(30,I,1,0,"ngx-spinner",23),t.k0s(),t.nrm(31,"app-config",24)),2&o&&(t.R7$(1),t.BMQ("fill",r.dark?"var(--primary-900)":"var(--primary-500)"),t.R7$(1),t.BMQ("fill",r.dark?"var(--primary-800)":"var(--primary-400)"),t.R7$(1),t.BMQ("fill",r.dark?"var(--primary-700)":"var(--primary-300)"),t.R7$(1),t.BMQ("fill",r.dark?"var(--primary-600)":"var(--primary-200)"),t.R7$(1),t.BMQ("fill",r.dark?"var(--primary-500)":"var(--primary-100)"),t.R7$(11),t.Y8G("ngModel",r.identification),t.R7$(7),t.Y8G("ngModel",r.password),t.R7$(7),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("minimal",!0))},dependencies:[g.bT,u._f,h.S,a.me,a.BC,a.vS,x.l,d.et],encapsulation:2})}return i})(),b=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#i=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[c.iI.forChild([{path:"",component:w}]),c.iI]})}return i})();var S=e(5430),R=e(6497),j=e(8150);let B=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#i=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[g.MD,b,u.tm,h.u,S.q4,a.YN,R.G,j.kr,d.PO]})}return i})()}}]);