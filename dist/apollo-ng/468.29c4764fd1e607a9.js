"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[468],{468:(rt,_,n)=>{n.r(_),n.d(_,{ListaEmpresasModule:()=>nt});var C=n(177),l=n(9417),S=n(612),m=n(9280),y=n(4714),v=n(1141),X=n(9266),d=n(5473),h=n(2242),k=n(1305),D=n(3973),G=n(563),j=n(6296),B=n(8150),L=n(1579),R=n(9998),F=n(7835),T=n(320),U=n(8542),I=n(4799),V=n(1142),$=n(6781),p=n(2100),b=n(9664),u=n(8763),P=n(8032),f=n.n(P),t=n(7019),g=n(5779),x=n(3088);function O(s,a){1&s&&(t.j41(0,"span",2),t.EFF(1,"Registrar empresa"),t.k0s())}function A(s,a){if(1&s){const e=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"span",6),t.nrm(4,"i",7),t.j41(5,"input",8),t.bIt("ngModelChange",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.name=o)}),t.k0s(),t.j41(6,"label",9),t.EFF(7,"Nombre"),t.k0s()(),t.j41(8,"small",10),t.EFF(9,"Campo obligatorio *"),t.k0s()(),t.j41(10,"div",5)(11,"span",6),t.nrm(12,"i",7),t.j41(13,"input",8),t.bIt("ngModelChange",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.domain=o)}),t.k0s(),t.j41(14,"label",9),t.EFF(15,"Dominio"),t.k0s()(),t.j41(16,"small",10),t.EFF(17,"Campo obligatorio *"),t.k0s()()()(),t.j41(18,"div",11)(19,"button",12),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.Guardaruser())}),t.k0s(),t.j41(20,"button",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeModal())}),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(5),t.Y8G("ngModel",e.name),t.R7$(8),t.Y8G("ngModel",e.domain)}}let M=(()=>{class s{constructor(e,i,o,r,c,E){this.router=e,this.primengConfig=i,this.translate=o,this.ref=r,this.empresaService=c,this.config=E,this.visible=!1,this.id=0,this.name="",this.domain="",this.database="BD",this.status="1",this.rol_id=8,this.domain_id=0,this.config.data?(console.log(this.config.data),this.id=this.config.data.id,this.name=this.config.data.name,this.domain=this.config.data.domain,this.domain_id=this.config.data.domain_id):(this.id=0,this.name="")}Guardaruser(){const e={name:this.name,domain:this.domain,database:this.database,status:this.status,rol_id:this.rol_id,domain_id:this.domain_id};console.log("empresa",e),this.id>0?this.empresaService.actualizarEmpresa(e,this.id).subscribe(i=>{this.closeModal(),f().fire({title:"\xa1\xc9xito!",text:"Los Datos se registraron correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})},i=>{console.error("Error al guardar el rol",i)}):(this.empresaService.guardarEmpresa(e).subscribe(i=>{this.closeModal(),f().fire({title:"\xa1\xc9xito!",text:"Los Datos se registraron correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})},i=>{console.error("Error al guardar el rol",i)}),f().fire({title:"\xa1\xc9xito!",text:"Los Datos se registraron correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{}))}closeDialog(){this.visible=!1}closeModal(){this.ref.close({register:!1})}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(u.Ix),t.rXU(g.r1),t.rXU(b.c$),t.rXU(p.Pw),t.rXU(x.O),t.rXU(p.sb))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-registra-empresa"]],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[1,"row"],[1,"grid","p-fluid"],[1,"field","md:col-6"],[1,"p-float-label","p-input-icon-left"],[1,"pi","pi-user-edit"],["type","text","id","director","pInputText","",3,"ngModel","ngModelChange"],["for","director"],[2,"color","brown"],[1,"row","mb-5","text-right"],["pButton","","label","Guardar","icon","pi pi-plus","id","btnGuardar",1,"p-button-success","mr-2",3,"click"],["pButton","","label","Cerrar","icon","pi pi-times","iconPos","right",1,"p-button-close-clean",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"p-panel"),t.DNE(1,O,2,0,"ng-template",0),t.DNE(2,A,21,2,"ng-template",1),t.k0s())},dependencies:[d.Z,g.Ei,l.me,l.BC,l.vS,v._f,h.S]})}return s})();var Y=n(8774);function J(s,a){if(1&s){const e=t.RV6();t.j41(0,"div",2)(1,"span",3),t.EFF(2,"Buscar rol"),t.k0s(),t.j41(3,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.guardarRolEmpresa(1,1))}),t.EFF(4,"Guardar"),t.k0s()()}}function Z(s,a){1&s&&(t.j41(0,"tr")(1,"th",10),t.EFF(2,"ID"),t.k0s(),t.j41(3,"th",10),t.EFF(4,"Nombre"),t.k0s(),t.j41(5,"th",10),t.EFF(6,"Asignar"),t.k0s()())}function w(s,a){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"input",11),t.bIt("ngModelChange",function(o){t.eBV(e);const r=t.XpG(2);return t.Njj(r.rolSeleccionado=o)}),t.k0s()()()}if(2&s){const e=a.$implicit,i=t.XpG(2);t.R7$(2),t.JRh(e.id),t.R7$(2),t.JRh(e.nombre),t.R7$(2),t.Y8G("ngModel",i.rolSeleccionado)("value",e)}}function z(s,a){if(1&s&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"p-table",8),t.DNE(4,Z,7,0,"ng-template",0),t.DNE(5,w,7,4,"ng-template",9),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(3),t.Y8G("value",e.roles)}}let H=(()=>{class s{constructor(e,i,o,r,c,E,ot){this.router=e,this.primengConfig=i,this.translate=o,this.ref=r,this.rolService=c,this.config=E,this.helpersService=ot,this.visible=!1,this.roles=[],this.domain_id=this.helpersService.getDominioId(),this.rolService.getRoles(this.domain_id).subscribe(N=>{console.log("Lista de Roles",N),this.roles=N})}guardarRolEmpresa(e,i){this.rolService.actualizarEmpresa(e,i).subscribe(o=>{this.closeModal(),f().fire({title:"\xa1\xc9xito!",text:"Los Datos se registraron correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})},o=>{console.error("Error al guardar el rol",o)})}onCheckboxChange(e,i){i.target.checked?this.rolSeleccionado.add(e):this.rolSeleccionado.delete(e)}closeDialog(){this.visible=!1}closeModal(){this.ref.close({register:!1})}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(u.Ix),t.rXU(g.r1),t.rXU(b.c$),t.rXU(p.Pw),t.rXU(x.O),t.rXU(p.sb),t.rXU(Y.V))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-lista-roles"]],standalone:!0,features:[t.aNF],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"d-flex","justify-content-between"],[1,"text-primary","font-semibold","text-xl"],["pButton","","label","Cerrar","icon","pi pi-times","iconPos","right",1,"p-button-close-clean",3,"click"],[1,"row"],[1,"grid","p-fluid"],[1,"field","md:col-12"],[1,"w-full","custom-search-input",3,"value"],["pTemplate","body"],[2,"min-width","10rem"],["type","checkbox",3,"ngModel","value","ngModelChange"]],template:function(i,o){1&i&&(t.j41(0,"p-panel"),t.DNE(1,J,5,0,"ng-template",0),t.DNE(2,z,6,1,"ng-template",1),t.k0s())},dependencies:[C.MD,d.b,d.Z,g.Ei,l.YN,l.Zm,l.BC,l.vS,m.bG,m.XI]})}return s})();function W(s,a){1&s&&(t.j41(0,"span",2),t.EFF(1,"Buscar empresas"),t.k0s())}function K(s,a){if(1&s){const e=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"span",11),t.nrm(3,"input",12),t.k0s()(),t.j41(4,"div",13)(5,"button",14),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.navigateToNuevo(0))}),t.k0s()()()}}function Q(s,a){1&s&&(t.j41(0,"tr")(1,"th",15),t.EFF(2,"Acciones"),t.k0s(),t.j41(3,"th",15),t.EFF(4,"ID"),t.k0s(),t.j41(5,"th",15),t.EFF(6,"Nombre"),t.k0s(),t.j41(7,"th",15),t.EFF(8,"Dominio"),t.k0s()())}const q=function(){return{color:"var(--primary-color)","font-size":"1.5rem"}};function tt(s,a){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td",16)(2,"button",17),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.navigateToNuevo(r.id))}),t.nrm(3,"i",18),t.k0s(),t.j41(4,"button",19),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.eliminar(r.id))}),t.EFF(5,"X "),t.k0s()(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td")(11,"a",20),t.EFF(12),t.k0s()()()}if(2&s){const e=a.$implicit;t.R7$(3),t.Aen(t.lJ4(5,q)),t.R7$(4),t.JRh(e.id),t.R7$(2),t.JRh(e.name),t.R7$(3),t.JRh(e.domain)}}function et(s,a){if(1&s&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"p-table",6),t.DNE(4,K,6,0,"ng-template",7),t.DNE(5,Q,9,0,"ng-template",0),t.DNE(6,tt,13,6,"ng-template",8),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(3),t.Y8G("value",e.empresas)}}let st=(()=>{class s{constructor(e,i,o){this.router=e,this.dialogService=i,this.empresaService=o,this.empresas=[],this.empresa=[],this.data=[{item:"prueba1",nombre:"Nombre1",abreviatura:"Abrev1",grupo:"Grupo1",dominio:"Dominio1"},{item:"prueba2",nombre:"Nombre2",abreviatura:"Abrev2",grupo:"Grupo2",dominio:"Dominio2"},{item:"prueba2",nombre:"Nombre2",abreviatura:"Abrev2",grupo:"Grupo2",dominio:"Dominio2"}],this.empresaService.getEmpresas().subscribe(r=>{console.log("Lista de EMPRESAS",r),this.empresas=r}),console.log("asdsa")}navigateToNuevo(e){e>0?this.empresaService.getEmpresa(e).subscribe(i=>{this.empresa=i,this.ref=this.dialogService.open(M,{width:"60%",styleClass:"custom-dialog-header",data:this.empresa}),this.ref.onClose.subscribe(o=>{this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload"}),console.log(this.empresa)}):(this.ref=this.dialogService.open(M,{width:"60%",styleClass:"custom-dialog-header"}),this.ref.onClose.subscribe(i=>{this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload"}))}eliminar(e){this.empresaService.eliminarEmpresa(e).subscribe(i=>{console.log("empresa eliminada:",i),this.empresaService.getEmpresas().subscribe(o=>{console.log("Lista de Empresas",o),this.empresas=o})},i=>{console.error("Error eliminando ciclo:",i)})}listaRoles(e){this.ref=this.dialogService.open(H,{width:"60%",styleClass:"custom-dialog-header"}),this.ref.onClose.subscribe(i=>{this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload"})}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(u.Ix),t.rXU(p.o3),t.rXU(x.O))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-lista-empresas"]],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[1,"row"],[1,"grid","p-fluid"],[1,"field","md:col-12"],[1,"w-full","custom-search-input",3,"value"],["pTemplate","caption"],["pTemplate","body"],[1,"flex","justify-content-between","flex-wrap","flex-wrap"],[1,"flex-grow-1","mb-2","mr-2"],[1,"p-input-icon-left","w-full"],["pInputText","","type","text","placeholder","Buscar miembro",1,"w-full"],[1,"mb-2"],["pButton","","label","Nuevo","icon","pi pi-user-plus",1,"p-button-primary","mr-2",2,"border-radius","30px",3,"click"],[2,"min-width","10rem"],[1,"text-center","flex","gap-2"],["pButton","","title","Editar rol",1,"p-button-rounded","p-button-text","custom-edit-button",2,"width","fit-content",3,"click"],["aria-hidden","true",1,"pi","pi-user-edit"],["pButton","","title","Eliminar rol",1,"p-button-rounded","p-button-text","custom-edit-button",2,"width","fit-content",3,"click"],["href",""]],template:function(i,o){1&i&&(t.j41(0,"p-panel"),t.DNE(1,W,2,0,"ng-template",0),t.DNE(2,et,7,1,"ng-template",1),t.k0s())},dependencies:[d.Z,g.Ei,v._f,m.XI,h.S],styles:[".selects_content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.selects_content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selects_content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%], .selects_content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid rgb(136,133,133);border-radius:10px;margin-top:.4rem;width:14.5rem;padding:.8rem 1rem;outline:none}"]})}return s})(),it=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[u.iI.forChild([{path:"",component:st}]),u.iI]})}return s})(),nt=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[C.MD,d.b,l.YN,S.rO,m.bG,it,y.wZ,v.tm,X.SW,h.u,k.f,D.d0,G.Z,j.iV,B.kr,L.d,R.MB,F.H,T.e,U.S,R.MB,m.bG,F.H,I.F,T.e,V.sv,$.P,p.k_,b.h,h.u,j.iV]})}return s})()}}]);