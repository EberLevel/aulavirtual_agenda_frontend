"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[4982],{4982:(ft,j,r)=>{r.r(j),r.d(j,{MailAppModule:()=>bt});var u=r(177),h=r(9417),d=r(8763),t=r(7019),S=r(9998),B=r(5964),X=r(4412),V=r(1626);let m=(()=>{class s{constructor(e){this.http=e,this._mails=[],this.mails=new X.t(this._mails),this.mails$=this.mails.asObservable(),this.http.get("assets/demo/data/mail.json").toPromise().then(i=>i.data).then(i=>{this.updateMails(i)})}updateMails(e){this._mails=e,this.mails.next(e)}onStar(e){this._mails=this._mails.map(i=>i.id===e?{...i,starred:!i.starred}:i),this.mails.next(this._mails)}onArchive(e){this._mails=this._mails.map(i=>i.id===e?{...i,archived:!i.archived}:i),this.mails.next(this._mails)}onBookmark(e){this._mails=this._mails.map(i=>i.id===e?{...i,important:!i.important}:i),this.mails.next(this._mails)}onDelete(e){this._mails=this._mails.filter(i=>i.id!==e),this.mails.next(this._mails)}onDeleteMultiple(e){let i=e.map(n=>Number(n.id));this._mails=this._mails.filter(n=>-1==i.indexOf(n.id)),this.mails.next(this._mails)}onArchiveMultiple(e){let i=e.map(n=>n.id);for(let n=0;n<this._mails.length;n++){let a=this._mails[n];-1!==i.indexOf(a.id)&&(a.archived=!0,this._mails[n]=a)}this.mails.next(this._mails)}onSpamMultiple(e){let i=e.map(n=>n.id);for(let n=0;n<this._mails.length;n++){let a=this._mails[n];-1!==i.indexOf(a.id)&&(a={...a,spam:!0,important:!1,starred:!1,archived:!1},this._mails[n]=a)}this.mails.next(this._mails)}onTrash(e){this._mails=this._mails.map(i=>i.id===e?{...i,trash:!0}:i),this.mails.next(this._mails)}onSend(e){e.id||(e.id=this.generateId()),e.title||(e.title="Untitled"),e.date=this.generateDate(),this._mails.push(e),this.mails.next(this._mails)}generateId(){let e="";for(var n=0;n<5;n++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}generateDate(){return(new Date).toDateString().split(" ").slice(1,4).join(" ")}static#t=this.\u0275fac=function(i){return new(i||s)(t.KVO(V.Qq))};static#e=this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac})}return s})();var f=r(1141),g=r(563);function $(s,p){if(1&s&&(t.j41(0,"span",8),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.badge)}}const F=function(s,p){return{"bg-primary":s,"hover:surface-hover":p}},T=function(s){return{"text-primary-50":s}};function D(s,p){if(1&s){const e=t.RV6();t.j41(0,"li",4),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.navigate(a))}),t.nrm(1,"i",5),t.j41(2,"span",6),t.EFF(3),t.k0s(),t.DNE(4,$,2,1,"span",7),t.k0s()}if(2&s){const e=p.$implicit,i=t.XpG();t.Y8G("ngClass",t.l_i(7,F,i.url===e.routerLink,i.url!==e.routerLink)),t.R7$(1),t.HbH(e.icon||""),t.Y8G("ngClass",t.eq3(10,T,i.url===e.routerLink)),t.R7$(1),t.Y8G("ngClass",t.eq3(12,T,i.url===e.routerLink)),t.R7$(1),t.JRh(e.label),t.R7$(1),t.Y8G("ngIf",e.badge)}}let U=(()=>{class s{constructor(e,i){this.router=e,this.mailService=i,this.items=[],this.url="",this.mailSubscription=this.mailService.mails$.subscribe(n=>this.getBadgeValues(n)),this.routeSubscription=this.router.events.pipe((0,B.p)(n=>n instanceof d.wF)).subscribe(n=>{this.url=n.url})}navigate(e){e.routerLink&&this.router.navigate([e.routerLink])}getBadgeValues(e){let i=[],n=[],a=[],l=[],c=[],y=[],I=[];for(let k=0;k<e.length;k++){let o=e[k];!o.archived&&!o.trash&&!o.spam&&!o.hasOwnProperty("sent")&&i.push(o),o.starred&&!o.archived&&!o.trash&&n.push(o),o.spam&&!o.archived&&!o.trash&&a.push(o),o.important&&!o.archived&&!o.trash&&l.push(o),o.archived&&!o.trash&&c.push(o),o.trash&&y.push(o),o.sent&&!o.archived&&!o.trash&&I.push(o)}this.badgeValues={inbox:i.length,starred:n.length,spam:a.length,important:l.length,archived:c.length,trash:y.length,sent:I.length},this.updateSidebar()}updateSidebar(){this.items=[{label:"Inbox",icon:"pi pi-inbox",badge:this.badgeValues.inbox,routerLink:"/apps/mail/inbox"},{label:"Starred",icon:"pi pi-star",badge:this.badgeValues.starred,routerLink:"/apps/mail/starred"},{label:"Spam",icon:"pi pi-ban",badge:this.badgeValues.spam,routerLink:"/apps/mail/spam"},{label:"Important",icon:"pi pi-bookmark",badge:this.badgeValues.important,routerLink:"/apps/mail/important"},{label:"Sent",icon:"pi pi-send",badge:this.badgeValues.sent,routerLink:"/apps/mail/sent"},{label:"Archived",icon:"pi pi-book",badge:this.badgeValues.archived,routerLink:"/apps/mail/archived"},{label:"Trash",icon:"pi pi-trash",badge:this.badgeValues.trash,routerLink:"/apps/mail/trash"}]}ngOnDestroy(){this.mailSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(d.Ix),t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-mail-sidebar"]],decls:5,vars:1,consts:[["pButton","","pRipple","","label","Compose New","routerLink","/apps/mail/compose",1,"mb-5","w-full","p-button-outlined"],[1,"overflow-auto"],[1,"flex","flex-row","md:flex-column","gap-1","md:gap-2","list-none","m-0","p-0","overflow-auto"],["pRipple","","class","cursor-pointer select-none p-3 transition-duration-150 border-round flex align-items-center justify-content-center md:justify-content-start md:flex-1 flex-auto",3,"ngClass","click",4,"ngFor","ngForOf"],["pRipple","",1,"cursor-pointer","select-none","p-3","transition-duration-150","border-round","flex","align-items-center","justify-content-center","md:justify-content-start","md:flex-1","flex-auto",3,"ngClass","click"],[1,"md:mr-3","text-600","transition-duration-150","text-lg",3,"ngClass"],[1,"text-900","font-medium","hidden","md:inline",3,"ngClass"],["class","ml-auto text-sm font-semibold bg-primary-50 text-primary-900 px-2 py-1 hidden md:inline","style","border-radius: 2rem",4,"ngIf"],[1,"ml-auto","text-sm","font-semibold","bg-primary-50","text-primary-900","px-2","py-1","hidden","md:inline",2,"border-radius","2rem"]],template:function(i,n){1&i&&(t.j41(0,"div"),t.nrm(1,"button",0),t.j41(2,"div",1)(3,"ul",2),t.DNE(4,D,5,14,"li",3),t.k0s()()()),2&i&&(t.R7$(4),t.Y8G("ngForOf",n.items))},dependencies:[u.YU,u.Sq,u.bT,d.Wk,f._f,g.n],encapsulation:2})}return s})(),Y=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:7,vars:0,consts:[[1,"card"],[1,"flex","flex-column","md:flex-row","gap-4"],[1,"w-full","md:w-3","xl:w-2","xl:p-3"],[1,"md:w-9","xl:w-10","xl:p-3"]],template:function(i,n){1&i&&(t.nrm(0,"p-toast"),t.j41(1,"div",0)(2,"div",1)(3,"div",2),t.nrm(4,"app-mail-sidebar"),t.k0s(),t.j41(5,"div",3),t.nrm(6,"router-outlet"),t.k0s()()())},dependencies:[d.n3,S.y8,U],encapsulation:2})}return s})();var _=r(5779),w=r(5144),R=r(8542),v=r(9280),M=r(2242),C=r(9114),G=r(6781),x=r(1142);function N(s,p){if(1&s&&t.nrm(0,"div",20),2&s){const e=t.XpG(2);t.Y8G("innerHTML",e.content.message,t.npT)}}const E=function(){return{height:"250px"}};function A(s,p){if(1&s){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"label",4),t.EFF(4,"To"),t.k0s(),t.j41(5,"span",5),t.nrm(6,"i",6),t.j41(7,"input",7),t.bIt("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.content.from=n)}),t.k0s()()(),t.j41(8,"div",3)(9,"label",8),t.EFF(10,"Subject"),t.k0s(),t.j41(11,"span",5),t.nrm(12,"i",9),t.j41(13,"input",10),t.bIt("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.content.title=n)}),t.k0s()()(),t.DNE(14,N,1,1,"div",11),t.j41(15,"div",12)(16,"span",13),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.toggleMessage())}),t.nrm(17,"i",14),t.k0s(),t.j41(18,"p-editor",15),t.bIt("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.newMail.message=n)}),t.k0s()()(),t.j41(19,"div",16),t.nrm(20,"button",17)(21,"button",18),t.j41(22,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.sendMail())}),t.k0s()()()}if(2&s){const e=t.XpG();t.R7$(7),t.Y8G("ngModel",e.content.from),t.R7$(6),t.Y8G("ngModel",e.content.title),t.R7$(1),t.Y8G("ngIf",e.displayMessage),t.R7$(2),t.Y8G("pTooltip",e.displayMessage?"Hide content":"Show content"),t.R7$(2),t.Aen(t.lJ4(7,E)),t.Y8G("ngModel",e.newMail.message)}}let O=(()=>{class s{constructor(e,i){this.messageService=e,this.mailService=i,this.newMail={id:"",to:"",email:"",image:"",title:"",message:"",date:"",important:!1,starred:!1,trash:!1,spam:!1,archived:!1,sent:!0},this.displayMessage=!1,this.content={},this.hide=new t.bkB}sendMail(){let{image:e,from:i,title:n}=this.content;this.newMail={...this.newMail,to:i,title:n,image:e},this.mailService.onSend(this.newMail),this.messageService.add({severity:"success",summary:"Success",detail:"Mail sent"}),this.hide.emit()}toggleMessage(){this.displayMessage=!this.displayMessage}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(_.bg),t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-mail-reply"]],inputs:{content:"content"},outputs:{hide:"hide"},decls:1,vars:1,consts:[["class","p-0 m-0",4,"ngIf"],[1,"p-0","m-0"],[1,"surface-section","grid","grid-nogutter","formgrid","flex-column","md:flex-row","gap-6","p-5","border-round"],[1,"col"],["for","to",1,"block","text-900","font-semibold","mb-3"],[1,"p-input-icon-left","w-full",2,"height","3.5rem"],[1,"pi","pi-user",2,"left","1.5rem"],["id","to","type","text","pInputText","",1,"w-full","pl-7","text-900","font-semibold",2,"height","3.5rem",3,"ngModel","ngModelChange"],["for","Subject",1,"block","text-900","font-semibold","mb-3"],[1,"pi","pi-pencil",2,"left","1.5rem"],["id","subject","type","text","pInputText","","placeholder","Subject",1,"w-full","pl-7","text-900","font-semibold",2,"height","3.5rem",3,"ngModel","ngModelChange"],["class","border-1 surface-border border-round p-4",3,"innerHTML",4,"ngIf"],[1,"col-12","field"],[1,"surface-ground","cursor-pointer","border-round","px-2",3,"pTooltip","click"],[1,"pi","pi-ellipsis-h"],["styleClass","mt-3",3,"ngModel","ngModelChange"],[1,"flex","column-gap-3","justify-content-end","p-5","border-top-1","surface-border"],["pButton","","pRipple","","type","button","icon","pi pi-image",1,"p-button-outlined"],["pButton","","pRipple","","type","button","icon","pi pi-paperclip",1,"p-button-outlined"],["pButton","","pRipple","","type","button","icon","pi pi-send","label","Send",1,"p-button-primary","h-3rem",3,"click"],[1,"border-1","surface-border","border-round","p-4",3,"innerHTML"]],template:function(i,n){1&i&&t.DNE(0,A,23,8,"div",0),2&i&&t.Y8G("ngIf",n.content)},dependencies:[u.bT,h.me,h.BC,h.vS,R.m,f._f,g.n,M.S,x.KE],encapsulation:2})}return s})();function L(s,p){if(1&s){const e=t.RV6();t.j41(0,"div",6)(1,"div",7),t.nrm(2,"p-tableHeaderCheckbox")(3,"button",8),t.j41(4,"button",9),t.bIt("click",function(n){t.eBV(e);const a=t.sdS(6);return t.Njj(a.toggle(n))}),t.k0s(),t.nrm(5,"p-menu",10,11),t.k0s(),t.j41(7,"span",12),t.nrm(8,"i",13),t.j41(9,"input",14),t.bIt("input",function(n){t.eBV(e);const a=t.XpG(),l=t.sdS(1);return t.Njj(a.onGlobalFilter(l,n))}),t.k0s()()()}if(2&s){const e=t.XpG(),i=t.sdS(1);t.R7$(5),t.Y8G("model",e.menuItems)("appendTo",i)("popup",!0)}}const P=function(s,p){return{"pi-star-fill":s,"pi-star":p}};function H(s,p){if(1&s){const e=t.RV6();t.j41(0,"td",33)(1,"span",34),t.bIt("click",function(n){t.eBV(e);const a=t.XpG().$implicit,l=t.XpG();return t.Njj(l.onStar(n,a.id))})("touchend",function(n){t.eBV(e);const a=t.XpG().$implicit,l=t.XpG();return t.Njj(l.onStar(n,a.id))}),t.nrm(2,"i",35),t.k0s()()}if(2&s){const e=t.XpG().$implicit;t.R7$(2),t.Y8G("ngClass",t.l_i(1,P,e.starred,!e.starred))}}const J=function(s,p){return{"pi-bookmark-fill":s,"pi-bookmark":p}};function K(s,p){if(1&s){const e=t.RV6();t.j41(0,"td",33)(1,"span",34),t.bIt("click",function(n){t.eBV(e);const a=t.XpG().$implicit,l=t.XpG();return t.Njj(l.onBookmark(n,a.id))})("touchend",function(n){t.eBV(e);const a=t.XpG().$implicit,l=t.XpG();return t.Njj(l.onBookmark(n,a.id))}),t.nrm(2,"i",35),t.k0s()()}if(2&s){const e=t.XpG().$implicit;t.R7$(2),t.Y8G("ngClass",t.l_i(1,J,e.important,!e.important))}}function Z(s,p){if(1&s){const e=t.RV6();t.j41(0,"tr",15),t.bIt("mouseenter",function(n){t.eBV(e);const a=t.sdS(18),l=t.sdS(15),c=t.XpG();return t.Njj(c.toggleOptions(n,a,l))})("mouseleave",function(n){t.eBV(e);const a=t.sdS(18),l=t.sdS(15),c=t.XpG();return t.Njj(c.toggleOptions(n,a,l))})("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onRowSelect(a.id))}),t.j41(1,"td",16)(2,"p-tableCheckbox",17),t.bIt("click",function(n){return n.stopPropagation()})("touchend",function(n){return n.stopPropagation()}),t.k0s()(),t.DNE(3,H,3,4,"td",18),t.DNE(4,K,3,4,"td",18),t.j41(5,"td",19),t.nrm(6,"p-avatar",20),t.k0s(),t.j41(7,"td",21),t.EFF(8),t.k0s(),t.j41(9,"td",22)(10,"span",23),t.EFF(11),t.k0s()(),t.j41(12,"td",24)(13,"div",25)(14,"span",26,27),t.EFF(16),t.k0s(),t.j41(17,"div",28,29)(19,"button",30),t.bIt("click",function(n){const l=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.onArchive(n,l.id))}),t.k0s(),t.j41(20,"button",31),t.bIt("click",function(n){const l=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.onReply(n,l))}),t.k0s(),t.j41(21,"button",32),t.bIt("click",function(n){const l=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.onTrash(n,l))}),t.k0s()()()()()}if(2&s){const e=p.$implicit;t.R7$(2),t.Y8G("value",e),t.R7$(1),t.Y8G("ngIf",!e.trash&&!e.spam),t.R7$(1),t.Y8G("ngIf",!e.trash&&!e.spam),t.R7$(2),t.Y8G("image",e.image?"assets/demo/images/avatar/"+e.image:"assets/layout/images/avatar.png"),t.R7$(2),t.SpI(" ",e.from||e.to," "),t.R7$(3),t.SpI(" ",e.title," "),t.R7$(5),t.SpI(" ",e.date," ")}}const z=function(){return["from","title","message"]},W=function(){return[10,20,30]};let b=(()=>{class s{constructor(e,i,n){this.router=e,this.mailService=i,this.messageService=n,this.menuItems=[],this.selectedMails=[],this.mail={},this.dialogVisible=!1}ngOnInit(){this.menuItems=[{label:"Archive",icon:"pi pi-fw pi-file",command:()=>this.onArchiveMultiple()},{label:"Spam",icon:"pi pi-fw pi-ban",command:()=>this.onSpamMultiple()},{label:"Delete",icon:"pi pi-fw pi-trash",command:()=>this.onDeleteMultiple()}]}toggleOptions(e,i,n){"mouseenter"===e.type?(i.style.display="flex",n.style.display="none"):(i.style.display="none",n.style.display="flex")}onRowSelect(e){this.router.navigate(["/apps/mail/detail/",e])}onStar(e,i){e.stopPropagation(),this.mailService.onStar(i)}onArchive(e,i){e.stopPropagation(),this.mailService.onArchive(i),this.messageService.add({severity:"info",summary:"Info",detail:"Mail archived",life:3e3})}onBookmark(e,i){e.stopPropagation(),this.mailService.onBookmark(i)}onDelete(e){this.mailService.onDelete(e),this.messageService.add({severity:"info",summary:"Info",detail:"Mail deleted",life:3e3})}onDeleteMultiple(){this.selectedMails&&this.selectedMails.length>0&&(this.mailService.onDeleteMultiple(this.selectedMails),this.messageService.add({severity:"info",summary:"Info",detail:"Mails deleted",life:3e3}))}onSpamMultiple(){this.selectedMails&&this.selectedMails.length>0&&(this.mailService.onSpamMultiple(this.selectedMails),this.messageService.add({severity:"info",summary:"Info",detail:"Moved to spam",life:3e3}))}onArchiveMultiple(){this.selectedMails&&this.selectedMails.length>0&&(this.mailService.onArchiveMultiple(this.selectedMails),this.messageService.add({severity:"info",summary:"Info",detail:"Moved to archive",life:3e3}))}onTrash(e,i){e.stopPropagation(),i.trash&&this.onDelete(i.id),this.mailService.onTrash(i.id)}onReply(e,i){e.stopPropagation(),this.mail=i,this.dialogVisible=!0}onGlobalFilter(e,i){e.filterGlobal(i.target.value,"contains")}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(d.Ix),t.rXU(m),t.rXU(_.bg))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-mail-table"]],inputs:{mails:"mails"},decls:6,vars:13,consts:[["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","body"],["header","New Message","styleClass","mx-3 sm:mx-0 sm:w-full md:w-8 lg:w-6","contentStyleClass","border-round-bottom border-top-1 surface-border p-0",3,"visible","closable","modal","visibleChange","onHide"],[3,"content","hide"],[1,"flex","flex-wrap","align-items-center","justify-content-between","gap-3"],[1,"flex","gap-2","align-items-center"],["pButton","","pRipple","","type","button","icon","pi pi-refresh",1,"p-button-rounded","p-button-text","p-button-plain","ml-4"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","p-button-plain","ml-3",3,"click"],[3,"model","appendTo","popup"],["menu",""],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search Mail",1,"w-full","sm:w-auto",3,"input"],[1,"cursor-pointer",3,"mouseenter","mouseleave","click"],[1,"pl-3",2,"width","4rem"],[3,"value","click","touchend"],["style","width: 4rem",4,"ngIf"],[2,"min-width","4rem"],[3,"image"],[1,"text-900","font-semibold",2,"min-width","12rem"],[2,"min-width","12rem"],[1,"font-medium","white-space-nowrap","overflow-hidden","text-overflow-ellipsis","block",2,"max-width","30rem"],[2,"min-width","10rem"],[1,"flex","justify-content-end","w-full","px-0"],[1,"text-700","font-semibold","white-space-nowrap"],["date",""],[2,"display","none"],["options",""],["pButton","","pRipple","","icon","pi pi-inbox","pTooltip","Archive","tooltipPosition","top","type","button",1,"h-2rem","w-2rem","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-reply","pTooltip","Reply","tooltipPosition","top","type","button",1,"p-button-secondary","h-2rem","w-2rem","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Trash","tooltipPosition","top","type","button",1,"p-button-danger","h-2rem","w-2rem",3,"click"],[2,"width","4rem"],[1,"cursor-pointer",3,"click","touchend"],[1,"pi","pi-fw","text-xl",3,"ngClass"]],template:function(i,n){1&i&&(t.j41(0,"p-table",0,1),t.bIt("selectionChange",function(l){return n.selectedMails=l}),t.DNE(2,L,10,3,"ng-template",2),t.DNE(3,Z,22,7,"ng-template",3),t.k0s(),t.j41(4,"p-dialog",4),t.bIt("visibleChange",function(l){return n.dialogVisible=l})("onHide",function(){return n.dialogVisible=!1}),t.j41(5,"app-mail-reply",5),t.bIt("hide",function(){return n.dialogVisible=!1}),t.k0s()()),2&i&&(t.Y8G("value",n.mails)("rows",10)("globalFilterFields",t.lJ4(11,z))("paginator",!0)("rowsPerPageOptions",t.lJ4(12,W))("selection",n.selectedMails)("rowHover",!0),t.R7$(4),t.Y8G("visible",n.dialogVisible)("closable",!0)("modal",!0),t.R7$(1),t.Y8G("content",n.mail))},dependencies:[u.YU,u.bT,w.W1,R.m,f._f,_.Ei,g.n,v.XI,v.S9,v.nA,M.S,C.e,G.l,O],encapsulation:2})}return s})(),Q=(()=>{class s{constructor(e,i){this.mailService=e,this.router=i,this.mails=[],this.subscription=this.mailService.mails$.subscribe(n=>{this.mails=n.filter(a=>!(a.archived||a.spam||a.trash||a.hasOwnProperty("sent")))})}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(m),t.rXU(d.Ix))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"mails"]],template:function(i,n){1&i&&t.nrm(0,"app-mail-table",0),2&i&&t.Y8G("mails",n.mails)},dependencies:[b],encapsulation:2})}return s})();const q=function(){return{height:"250px"}};let tt=(()=>{class s{constructor(e,i,n,a){this.messageService=e,this.location=i,this.router=n,this.mailService=a,this.newMail={id:"",to:"",email:"",image:"",title:"",message:"",date:"",important:!1,starred:!1,trash:!1,spam:!1,archived:!1,sent:!0}}sendMail(){this.newMail.message&&(this.newMail.id=Math.floor(1e3*Math.random()),this.mailService.onSend(this.newMail),this.messageService.add({severity:"success",summary:"Success",detail:"Mail sent"}),this.router.navigate(["apps/mail/inbox"]))}goBack(){this.location.back()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(_.bg),t.rXU(u.aZ),t.rXU(d.Ix),t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:21,vars:6,consts:[[1,"flex","align-items-center","px-4","md:px-0","border-top-1","surface-border","md:border-none","pt-4","md:pt-0"],["pButton","","pRipple","","type","button","icon","pi pi-chevron-left",1,"p-button-outlined","p-button-secondary","surface-border","text-900","w-3rem","h-3rem","mr-3",3,"click"],[1,"block","text-900","font-bold","text-xl"],[1,"surface-section","grid","mt-4","grid-nogutter","formgrid","p-4","gap-3","md:surface-border","md:border-1","border-round"],[1,"col-12","field"],["for","to",1,"text-900","font-semibold"],[1,"p-input-icon-left","w-full",2,"height","3.5rem"],[1,"pi","pi-user",2,"left","1.5rem"],["id","to","type","text","pInputText","",1,"w-full","pl-7","text-900","font-semibold",2,"height","3.5rem",3,"ngModel","ngModelChange"],["for","Subject",1,"text-900","font-semibold"],[1,"pi","pi-pencil",2,"left","1.5rem"],["id","subject","type","text","pInputText","","placeholder","Subject",1,"w-full","pl-7","text-900","font-semibold",2,"height","3.5rem",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"col-12","flex","column-gap-3","justify-content-end"],["pButton","","pRipple","","type","button","icon","pi pi-send","label","Send Message",1,"p-button-primary","h-3rem","w-full","sm:w-auto",3,"click"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return n.goBack()}),t.k0s(),t.j41(2,"span",2),t.EFF(3,"Compose Message"),t.k0s()(),t.j41(4,"div",3)(5,"div",4)(6,"label",5),t.EFF(7,"To"),t.k0s(),t.j41(8,"span",6),t.nrm(9,"i",7),t.j41(10,"input",8),t.bIt("ngModelChange",function(l){return n.newMail.to=l}),t.k0s()()(),t.j41(11,"div",4)(12,"label",9),t.EFF(13,"Subject"),t.k0s(),t.j41(14,"span",6),t.nrm(15,"i",10),t.j41(16,"input",11),t.bIt("ngModelChange",function(l){return n.newMail.title=l}),t.k0s()()(),t.j41(17,"div",4)(18,"p-editor",12),t.bIt("ngModelChange",function(l){return n.newMail.message=l}),t.k0s()(),t.j41(19,"div",13)(20,"button",14),t.bIt("click",function(){return n.sendMail()}),t.k0s()()()),2&i&&(t.R7$(10),t.Y8G("ngModel",n.newMail.to),t.R7$(6),t.Y8G("ngModel",n.newMail.title),t.R7$(2),t.Aen(t.lJ4(5,q)),t.Y8G("ngModel",n.newMail.message))},dependencies:[h.me,h.BC,h.vS,f._f,g.n,M.S,x.KE],encapsulation:2})}return s})();var et=r(5558);function it(s,p){if(1&s&&t.nrm(0,"p-avatar",20),2&s){const e=t.XpG(2);t.Y8G("image","assets/demo/images/avatar/"+e.mail.image)}}const nt=function(){return{height:"250px"}};function st(s,p){if(1&s){const e=t.RV6();t.j41(0,"div")(1,"div",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goBack())}),t.k0s(),t.DNE(4,it,1,1,"p-avatar",4),t.j41(5,"div",5)(6,"span",6),t.EFF(7),t.k0s(),t.j41(8,"span",7),t.EFF(9),t.k0s()()(),t.j41(10,"div",8)(11,"span",9),t.EFF(12),t.k0s(),t.nrm(13,"button",10)(14,"button",11),t.k0s()(),t.j41(15,"div",12)(16,"div",13),t.EFF(17),t.k0s(),t.nrm(18,"p",14),t.j41(19,"p-editor",15),t.bIt("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.newMail.message=n)}),t.k0s(),t.j41(20,"div",16),t.nrm(21,"button",17)(22,"button",18),t.j41(23,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.sendMail())}),t.k0s()()()()}if(2&s){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.mail&&e.mail.image),t.R7$(3),t.JRh(e.mail.from),t.R7$(2),t.SpI("To: ",e.mail.email||e.mail.to,""),t.R7$(3),t.JRh(e.mail.date),t.R7$(5),t.JRh(e.mail.title),t.R7$(1),t.Y8G("innerHTML",e.mail.message,t.npT),t.R7$(1),t.Aen(t.lJ4(9,nt)),t.Y8G("ngModel",e.newMail.message)}}let at=(()=>{class s{constructor(e,i,n,a,l){this.route=e,this.mailService=i,this.location=n,this.router=a,this.messageService=l,this.newMail={id:"",to:"",email:"",image:"",title:"",message:"",date:"",important:!1,starred:!1,trash:!1,spam:!1,archived:!1,sent:!0},this.mail={},this.subscription=this.route.params.pipe((0,et.n)(c=>(this.id=c.id,this.mailService.mails$))).subscribe(c=>{this.mail=c.filter(y=>y.id==this.id)[0]})}goBack(){this.location.back()}sendMail(){this.newMail.message&&(this.newMail.to=this.mail.from?this.mail.from:this.mail.to,this.newMail.image=this.mail.image,this.mailService.onSend(this.newMail),this.messageService.add({severity:"success",summary:"Success",detail:"Mail sent"}),this.router.navigate(["apps/mail/inbox"]))}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(d.nX),t.rXU(m),t.rXU(u.aZ),t.rXU(d.Ix),t.rXU(_.bg))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex","flex-column","md:flex-row","md:align-items-center","md:justify-content-between","mb-5","pt-5","md:pt-0","gap-4","md:border-top-none","border-top-1","surface-border"],[1,"flex","align-items-center","md:justify-content-start"],["pButton","","pRipple","","type","button","icon","pi pi-chevron-left",1,"p-button-text","p-button-plain","md:mr-3",3,"click"],["size","large","shape","circle","styleClass","border-2 surface-border",3,"image",4,"ngIf"],[1,"flex","flex-column","mx-3"],[1,"block","text-900","font-bold","text-lg"],[1,"block","text-900","font-semibold"],[1,"flex","align-items-center","justify-content-end","column-gap-3","px-4","md:px-0"],[1,"text-900","font-semibold","white-space-nowrap","mr-auto"],["pButton","","pRipple","","type","button","icon","pi pi-reply",1,"p-button-text","p-button-plain","flex-shrink-0"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-text","p-button-plain","flex-shrink-0"],[1,"surface-border","border-1","border-round","p-4"],[1,"text-900","font-semibold","text-lg","mb-3"],[1,"line-height-3","mt-0","mb-3",3,"innerHTML"],[3,"ngModel","ngModelChange"],[1,"flex","column-gap-3","justify-content-end","mt-3"],["pButton","","pRipple","","type","button","icon","pi pi-image",1,"p-button-outlined"],["pButton","","pRipple","","type","button","icon","pi pi-paperclip",1,"p-button-outlined"],["pButton","","pRipple","","type","button","icon","pi pi-send","label","Send",1,"p-button-primary",3,"click"],["size","large","shape","circle","styleClass","border-2 surface-border",3,"image"]],template:function(i,n){1&i&&t.DNE(0,st,24,10,"div",0),2&i&&t.Y8G("ngIf",n.mail)},dependencies:[u.bT,h.BC,h.vS,f._f,g.n,C.e,x.KE],encapsulation:2})}return s})(),lt=(()=>{class s{constructor(e){this.mailService=e,this.archivedMails=[],this.subscription=this.mailService.mails$.subscribe(i=>{this.archivedMails=i.filter(n=>n.archived)})}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"mails"]],template:function(i,n){1&i&&t.nrm(0,"app-mail-table",0),2&i&&t.Y8G("mails",n.archivedMails)},dependencies:[b],encapsulation:2})}return s})(),ot=(()=>{class s{constructor(e){this.mailService=e,this.importantMails=[],this.subscription=this.mailService.mails$.subscribe(i=>{this.importantMails=i.filter(n=>n.important&&!n.spam&&!n.trash&&!n.archived)})}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"mails"]],template:function(i,n){1&i&&t.nrm(0,"app-mail-table",0),2&i&&t.Y8G("mails",n.importantMails)},dependencies:[b],encapsulation:2})}return s})(),rt=(()=>{class s{constructor(e){this.mailService=e,this.sentMails=[],this.subscription=this.mailService.mails$.subscribe(i=>{this.sentMails=i.filter(n=>n.sent&&!n.trash&&!n.archived)})}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"mails"]],template:function(i,n){1&i&&t.nrm(0,"app-mail-table",0),2&i&&t.Y8G("mails",n.sentMails)},dependencies:[b],encapsulation:2})}return s})(),pt=(()=>{class s{constructor(e){this.mailService=e,this.spamMails=[],this.subscription=this.mailService.mails$.subscribe(i=>{this.spamMails=i.filter(n=>n.spam&&!n.archived&&!n.trash&&!n.hasOwnProperty("sent"))})}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"mails"]],template:function(i,n){1&i&&t.nrm(0,"app-mail-table",0),2&i&&t.Y8G("mails",n.spamMails)},dependencies:[b],encapsulation:2})}return s})(),ct=(()=>{class s{constructor(e){this.mailService=e,this.starredMails=[],this.subscription=this.mailService.mails$.subscribe(i=>{this.starredMails=i.filter(n=>n.starred&&!n.archived&&!n.trash)})}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"mails"]],template:function(i,n){1&i&&t.nrm(0,"app-mail-table",0),2&i&&t.Y8G("mails",n.starredMails)},dependencies:[b],encapsulation:2})}return s})(),mt=(()=>{class s{constructor(e){this.mailService=e,this.trashMails=[],this.subscription=this.mailService.mails$.subscribe(i=>{this.trashMails=i.filter(n=>n.trash)})}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"mails"]],template:function(i,n){1&i&&t.nrm(0,"app-mail-table",0),2&i&&t.Y8G("mails",n.trashMails)},dependencies:[b],encapsulation:2})}return s})(),dt=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#i=this.\u0275inj=t.G2t({imports:[d.iI.forChild([{path:"",component:Y,children:[{path:"",redirectTo:"inbox",pathMatch:"full"},{path:"inbox",data:{breadcrumb:"Inbox"},component:Q},{path:"detail/:id",data:{breadcrumb:"Detail"},component:at},{path:"compose",data:{breadcrumb:"Compose"},component:tt},{path:"archived",data:{breadcrumb:"Archived"},component:lt},{path:"important",data:{breadcrumb:"Important"},component:ot},{path:"sent",data:{breadcrumb:"Sent"},component:rt},{path:"spam",data:{breadcrumb:"Spam"},component:pt},{path:"starred",data:{breadcrumb:"Starred"},component:ct},{path:"trash",data:{breadcrumb:"Trash"},component:mt}]}]),d.iI]})}return s})();var ut=r(5430),ht=r(320);let bt=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#i=this.\u0275inj=t.G2t({providers:[_.bg,m],imports:[u.MD,h.YN,dt,w.Mk,f.tm,g.Z,v.bG,M.u,ut.q4,C.m,x.sv,S.MB,ht.e,G.P]})}return s})()}}]);