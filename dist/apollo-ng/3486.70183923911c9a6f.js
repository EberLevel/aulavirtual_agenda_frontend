"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[3486],{3486:(kt,I,i)=>{i.r(I),i.d(I,{ListaPostulantesModule:()=>Et});var d=i(177),g=i(5473),x=i(8763),L=i(8032),p=i.n(L),s=i(9417),t=i(7019),m=i(2100),f=i(1626),D=i(3587);let E=(()=>{class n{constructor(e){this.http=e,this.baseUrl=`${D.c.API_BASE}`,this.httpOptions={headers:new f.Lr({"Content-Type":"application/json"})}}getDataCreate(e){return this.http.get(`${this.baseUrl}cvbanks/create-data/${e}`)}getPostulanteById(e){return this.http.get(`${this.baseUrl}cvbanks/${e}`)}getPostulantes(e){return this.http.get(`${this.baseUrl}cvbanksByDominio/${e}`)}guardarPostulante(e){return this.http.post(`${this.baseUrl}cvbanks`,e,this.httpOptions)}actualizarPostulante(e,o){return this.http.put(`${this.baseUrl}cvbanks/${e}`,o,this.httpOptions)}eliminarPostulante(e){return this.http.delete(`${this.baseUrl}cvbanks/${e}`,this.httpOptions)}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(f.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var v=i(8774),_=i(5779),P=i(612),h=i(1141),u=i(2242),b=i(8150),F=i(320),N=i(5312);let R=(()=>{class n{constructor(e){this.http=e,this.baseUrl=`${N.c.API_BASE}`,this.urlFormularioFinal=`${this.baseUrl}formulario-final-postulante/`,this.httpOptions={headers:new f.Lr({"Content-Type":"application/json"})}}getDataCreate(){return this.http.get(`${this.urlFormularioFinal}data-create`)}createFormulario(e){return this.http.post(`${this.urlFormularioFinal}`,e,this.httpOptions)}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(f.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var k=i(1305);let S=(()=>{class n{constructor(e,o,a,l){this.fb=e,this.messageService=o,this.formularioFinalService=a,this.helpersService=l,this.estados=[],this.aceptaciones=[],this.nivelesCargo=[],this.puntajes=[],this.tablaReferencia=""}ngOnInit(){this.postulanteId||(this.postulanteId=this.helpersService.getPostulanteId()),this.formularioFinalForm=this.fb.group({observaciones:[""],estado_actual_id:["",s.k0.required],aceptacion_id:["",s.k0.required],nivel_cargo_final_id:["",s.k0.required],puntaje_id:["",s.k0.required],institucion:[""]}),this.cargarDatos()}cargarDatos(){this.formularioFinalService.getDataCreate().subscribe(e=>{this.estados=e.estados,this.aceptaciones=e.aceptaciones,this.nivelesCargo=e.nivelesCargo,this.puntajes=e.puntajes},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al cargar los datos para el formulario."})})}guardarFormulario(){if(this.formularioFinalForm.valid){const e={...this.formularioFinalForm.value,tabla_referencia:this.tablaReferencia,postulante_id:this.postulanteId};this.formularioFinalService.createFormulario(e).subscribe(o=>{p().fire({title:"\xa1\xc9xito!",text:"Formulario guardado correctamente",icon:"success",confirmButtonText:"Aceptar"}),this.formularioFinalForm.reset()},o=>{this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema al guardar el formulario"})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Formulario inv\xe1lido. Por favor, complete los campos requeridos."})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(s.ok),t.rXU(_.bg),t.rXU(R),t.rXU(v.V))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-formulario-final-postulante"]],inputs:{tablaReferencia:"tablaReferencia",postulanteId:"postulanteId"},decls:31,vars:6,consts:[[1,"field","col-12"],[1,"text-primary","font-semibold","text-xl"],[3,"formGroup","ngSubmit"],[1,"p-fluid","grid"],["for","observaciones"],["id","observaciones","formControlName","observaciones","pInputTextarea","","rows","3"],[1,"field","col-6"],["for","estado_actual_id"],["optionLabel","nombre","optionValue","id","id","estado_actual_id","formControlName","estado_actual_id",3,"options"],["for","aceptacion_id"],["optionLabel","nombre","optionValue","id","id","aceptacion_id","formControlName","aceptacion_id",3,"options"],["for","nivel_cargo_final_id"],["optionLabel","nombre","optionValue","id","id","nivel_cargo_final_id","formControlName","nivel_cargo_final_id",3,"options"],["for","puntaje_id"],["optionLabel","nombre","optionValue","id","id","puntaje_id","formControlName","puntaje_id",3,"options"],["for","institucion"],["id","institucion","formControlName","institucion","pInputText",""],["pButton","","type","submit","label","Guardar",1,"p-button-primary",3,"disabled"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"h3",1),t.EFF(2,"Formulario Final"),t.k0s()(),t.j41(3,"form",2),t.bIt("ngSubmit",function(){return a.guardarFormulario()}),t.j41(4,"div",3)(5,"div",0)(6,"label",4),t.EFF(7,"Observaciones"),t.k0s(),t.nrm(8,"textarea",5),t.k0s(),t.j41(9,"div",6)(10,"label",7),t.EFF(11,"Estado Actual"),t.k0s(),t.nrm(12,"p-dropdown",8),t.k0s(),t.j41(13,"div",6)(14,"label",9),t.EFF(15,"Aceptaci\xf3n"),t.k0s(),t.nrm(16,"p-dropdown",10),t.k0s(),t.j41(17,"div",6)(18,"label",11),t.EFF(19,"Nivel de Cargo Final"),t.k0s(),t.nrm(20,"p-dropdown",12),t.k0s(),t.j41(21,"div",6)(22,"label",13),t.EFF(23,"Puntaje"),t.k0s(),t.nrm(24,"p-dropdown",14),t.k0s(),t.j41(25,"div",0)(26,"label",15),t.EFF(27,"Instituci\xf3n"),t.k0s(),t.nrm(28,"input",16),t.k0s(),t.j41(29,"div",0),t.nrm(30,"button",17),t.k0s()()()),2&o&&(t.R7$(3),t.Y8G("formGroup",a.formularioFinalForm),t.R7$(9),t.Y8G("options",a.estados),t.R7$(4),t.Y8G("options",a.aceptaciones),t.R7$(4),t.Y8G("options",a.nivelesCargo),t.R7$(4),t.Y8G("options",a.puntajes),t.R7$(6),t.Y8G("disabled",a.formularioFinalForm.invalid))},dependencies:[s.qT,s.me,s.BC,s.cb,s.j4,s.JD,h._f,u.S,k.Z,b.ms]})}return n})();var O=i(7306),$=i(7739),B=i(6550),A=i(6222),V=i(3814);function Y(n,r){if(1&n&&(t.j41(0,"span",2),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ","add"===e.acciones?"Agregar Postulante":"ver"===e.acciones?"Ver Postulante":"Editar Postulante"," ")}}function X(n,r){1&n&&(t.j41(0,"small"),t.EFF(1," Archivo cargado con \xe9xito "),t.k0s())}function M(n,r){1&n&&t.nrm(0,"button",37)}function U(n,r){1&n&&t.nrm(0,"button",38)}function w(n,r){if(1&n&&t.nrm(0,"app-informacion-academica",39),2&n){const e=t.XpG(2);t.Y8G("postulanteId",e.postulanteId)}}function z(n,r){if(1&n&&t.nrm(0,"app-capacitacion-postulante",39),2&n){const e=t.XpG(2);t.Y8G("postulanteId",e.postulanteId)}}function H(n,r){if(1&n&&t.nrm(0,"app-experiencia-laboral",39),2&n){const e=t.XpG(2);t.Y8G("postulanteId",e.postulanteId)}}function J(n,r){if(1&n&&t.nrm(0,"app-referencias-laborales",39),2&n){const e=t.XpG(2);t.Y8G("postulanteId",e.postulanteId)}}function Z(n,r){if(1&n&&t.nrm(0,"app-referencias-familiares",39),2&n){const e=t.XpG(2);t.Y8G("postulanteId",e.postulanteId)}}function Q(n,r){if(1&n&&t.nrm(0,"app-formulario-final-postulante",40),2&n){const e=t.XpG(2);t.Y8G("postulanteId",e.postulanteId)}}function K(n,r){if(1&n){const e=t.RV6();t.j41(0,"form",3),t.bIt("ngSubmit",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.guardarPostulante())}),t.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),t.nrm(5,"input",8),t.j41(6,"label"),t.EFF(7,"C\xf3digo concursante"),t.k0s()()(),t.j41(8,"div",6)(9,"span",7),t.nrm(10,"input",9),t.j41(11,"label"),t.EFF(12,"C\xf3digo de puesto asignado"),t.k0s()()(),t.j41(13,"div",6)(14,"span",7),t.nrm(15,"input",10),t.j41(16,"label"),t.EFF(17,"Nombre"),t.k0s()()(),t.j41(18,"div",6)(19,"span",7),t.nrm(20,"p-dropdown",11),t.j41(21,"label"),t.EFF(22,"G\xe9nero"),t.k0s()()(),t.j41(23,"div",6)(24,"span",7),t.nrm(25,"input",12),t.j41(26,"label"),t.EFF(27,"Tel\xe9fono"),t.k0s()()(),t.j41(28,"div",6)(29,"span",7),t.nrm(30,"p-calendar",13),t.j41(31,"label"),t.EFF(32,"Fecha de nacimiento"),t.k0s()()(),t.j41(33,"div",6)(34,"span",7),t.nrm(35,"input",14),t.j41(36,"label"),t.EFF(37,"Edad"),t.k0s()()(),t.j41(38,"div",6)(39,"span",7),t.nrm(40,"input",15),t.j41(41,"label"),t.EFF(42,"Email"),t.k0s()()(),t.j41(43,"div",6)(44,"span",7),t.nrm(45,"input",16),t.j41(46,"label"),t.EFF(47,"Contrase\xf1a"),t.k0s()()(),t.j41(48,"div",6)(49,"span",7),t.nrm(50,"p-dropdown",17),t.j41(51,"label",18),t.EFF(52,"Doc. Identidad"),t.k0s()()(),t.j41(53,"div",6)(54,"span",7),t.nrm(55,"input",19),t.j41(56,"label"),t.EFF(57,"N\xfamero de documento"),t.k0s()()(),t.j41(58,"div",6)(59,"span",7),t.nrm(60,"p-dropdown",20),t.j41(61,"label"),t.EFF(62,"Estado Civil"),t.k0s()()(),t.j41(63,"div",6)(64,"span",7),t.nrm(65,"input",21),t.j41(66,"label"),t.EFF(67,"N\xfamero de hijos"),t.k0s()()(),t.j41(68,"div",6)(69,"span",7),t.nrm(70,"p-dropdown",22),t.j41(71,"label"),t.EFF(72,"Grado de instrucci\xf3n"),t.k0s()()(),t.j41(73,"div",23)(74,"span",7),t.nrm(75,"p-dropdown",24),t.j41(76,"label"),t.EFF(77,"Profesi\xf3n"),t.k0s()()(),t.j41(78,"div",6)(79,"span",7),t.nrm(80,"p-dropdown",25),t.j41(81,"label"),t.EFF(82,"Ocupaci\xf3n actual"),t.k0s()()(),t.j41(83,"div",6)(84,"span",7)(85,"p-fileUpload",26),t.bIt("onSelect",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.onFileChange(a))}),t.k0s()(),t.DNE(86,X,2,0,"small",27),t.k0s(),t.j41(87,"div",6)(88,"span",7),t.nrm(89,"p-dropdown",28),t.j41(90,"label"),t.EFF(91,"Estado actual"),t.k0s()()(),t.j41(92,"div",6)(93,"span",7),t.nrm(94,"p-calendar",29),t.j41(95,"label"),t.EFF(96,"Fecha de afiliaci\xf3n"),t.k0s()()()()(),t.j41(97,"div",4)(98,"div",30)(99,"div",31),t.DNE(100,M,1,0,"button",32),t.DNE(101,U,1,0,"button",33),t.j41(102,"button",34),t.bIt("click",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.closeModal(a))}),t.k0s()()()()(),t.DNE(103,w,1,1,"app-informacion-academica",35),t.DNE(104,z,1,1,"app-capacitacion-postulante",35),t.DNE(105,H,1,1,"app-experiencia-laboral",35),t.DNE(106,J,1,1,"app-referencias-laborales",35),t.DNE(107,Z,1,1,"app-referencias-familiares",35),t.DNE(108,Q,1,1,"app-formulario-final-postulante",36)}if(2&n){const e=t.XpG();let o;t.Y8G("formGroup",e.postulanteForm),t.R7$(20),t.Y8G("options",e.generoOptions),t.R7$(30),t.Y8G("options",e.identificationDocuments),t.R7$(10),t.Y8G("options",e.estadoCivilOptions),t.R7$(10),t.Y8G("options",e.gradoInstruccionOptions),t.R7$(5),t.Y8G("options",e.profesionOptions),t.R7$(5),t.Y8G("options",e.ocupacionOptions),t.R7$(6),t.Y8G("ngIf",null==(o=e.postulanteForm.get("imagen"))?null:o.value),t.R7$(3),t.Y8G("options",e.estadoActualOptions),t.R7$(11),t.Y8G("ngIf","add"===e.acciones),t.R7$(1),t.Y8G("ngIf","actualizar"===e.acciones),t.R7$(2),t.Y8G("ngIf","actualizar"===e.acciones&&8===e.rolId),t.R7$(1),t.Y8G("ngIf","actualizar"===e.acciones&&8===e.rolId),t.R7$(1),t.Y8G("ngIf","actualizar"===e.acciones&&8===e.rolId),t.R7$(1),t.Y8G("ngIf","actualizar"===e.acciones&&8===e.rolId),t.R7$(1),t.Y8G("ngIf","actualizar"===e.acciones&&8===e.rolId),t.R7$(1),t.Y8G("ngIf","actualizar"===e.acciones&&8===e.rolId)}}let C=(()=>{class n{constructor(e,o,a,l,c,Pt){this.fb=e,this.ref=o,this.config=a,this.postulanteService=l,this.helpersService=c,this.cd=Pt,this.generoOptions=[{label:"Masculino",value:"M"},{label:"Femenino",value:"F"}],this.docIdentidadOptions=[],this.ocupacionOptions=[],this.estadoActualOptions=[],this.identificationDocuments=[],this.estadoCivilOptions=[],this.gradoInstruccionOptions=[],this.profesionOptions=[],this.acciones=this.config.data.acciones,this.rolId=this.helpersService.getRolId(),8===this.rolId?this.postulanteId=this.config.data.postulanteId:8!==this.rolId&&(this.rolId=21),this.postulanteForm=this.fb.group({code:[{value:"",disabled:!0}],codigo_puesto_asignado:[""],nombre:["",s.k0.required],genero:[""],telefono:[""],fecha_nacimiento:[""],edad:[{value:"",disabled:!0}],email:["",[,s.k0.email]],contrasena:["",s.k0.required],doc_identidad:[""],numero_documento:["",s.k0.required],estado_civil:[""],numero_hijos:[0],grado_instruccion:[""],profesion:[""],ocupacion_actual:[""],imagen:[""],estado_actual:[""],fecha_afiliacion:[""]})}onFileChange(e){const o=e.files[0];if(o){const a=new FileReader;a.onload=l=>{const c=l.target.result.split(",")[1];this.postulanteForm.patchValue({imagen:c,nombre_archivo:o.name})},a.readAsDataURL(o)}}calculateAge(e){const o=new Date(e),a=new Date;let l=a.getFullYear()-o.getFullYear();const c=a.getMonth()-o.getMonth();return(c<0||0===c&&a.getDate()<o.getDate())&&l--,isNaN(l)?null:l}loadDropdownOptions(){this.postulanteService.getDataCreate(this.domain_id).subscribe(e=>{this.identificationDocuments=e.identification_documents||[],this.estadoCivilOptions=e.marital_statuses||[],this.gradoInstruccionOptions=e.education_degrees||[],this.profesionOptions=e.professions||[],this.estadoActualOptions=e.current_states||[],this.ocupacionOptions=e.ocupacion_actual||[],this.postulanteForm.patchValue({code:e.code,doc_identidad:this.identificationDocuments.length>0?this.identificationDocuments[0].id:null,estado_civil:this.estadoCivilOptions.length>0?this.estadoCivilOptions[0].id:null,grado_instruccion:this.gradoInstruccionOptions.length>0?this.gradoInstruccionOptions[0].id:null,profesion:this.profesionOptions.length>0?this.profesionOptions[0].id:null,estado_actual:this.estadoActualOptions.length>0?this.estadoActualOptions[0].id:null,ocupacion_actual:this.ocupacionOptions.length>0?this.ocupacionOptions[0].id:null})})}ngOnInit(){this.rolId=this.helpersService.getRolId(),this.domain_id=this.helpersService.getDominioId(),this.loadDropdownOptions(),("ver"===this.acciones||"actualizar"===this.acciones)&&this.postulanteService.getPostulanteById(this.config.data.data.id).subscribe(o=>{console.log(o),this.postulanteForm.patchValue({nombre:o.cvBank.names||"",codigo_puesto_asignado:o.cvBank.position_code||"",genero:o.cvBank.sex||"",telefono:o.cvBank.phone||"",fecha_nacimiento:this.convertToDate(o.cvBank.date_birth)||"",edad:this.calculateAge(o.cvBank.date_birth)||"",email:o.cvBank.email||"",doc_identidad:o.cvBank.identification_document_id||"",numero_documento:o.cvBank.identification_number||"",estado_civil:o.cvBank.marital_status_id||"",numero_hijos:o.cvBank.number_children||"",grado_instruccion:o.cvBank.education_degree_id||"",profesion:o.cvBank.profession_id||"",ocupacion_actual:o.cvBank.ocupacion_actual_id||"",estado_actual:o.cvBank.estado_actual_id||"",fecha_afiliacion:this.convertToDate(o.cvBank.date_affiliation)||""})}),this.postulanteForm.get("fecha_nacimiento")?.valueChanges.subscribe(e=>{const o=this.calculateAge(e);this.postulanteForm.get("edad")?.setValue(o||"",{emitEvent:!1})})}convertToDate(e){return e?new Date(e):null}formatDate(e){const o=new Date(e);return`${o.getFullYear()}-${("0"+(o.getMonth()+1)).slice(-2)}-${("0"+o.getDate()).slice(-2)}`}guardarPostulante(){if(this.postulanteForm.valid){this.postulanteForm.get("code")?.enable();const e={names:this.postulanteForm.value.nombre,identification_number:this.postulanteForm.value.numero_documento,password:this.postulanteForm.value.contrasena,domain_id:this.domain_id};console.log("Datos mapeados enviados al backend:",e),"actualizar"===this.acciones?this.postulanteService.actualizarPostulante(this.config.data.data.id,e).subscribe(a=>{this.ref?.close(),p().fire("\xa1\xc9xito!","Los datos se actualizaron correctamente","success")},a=>{console.error("Error en la solicitud:",a),p().fire("Error","Hubo un problema al actualizar el registro","error")}):this.postulanteService.guardarPostulante(e).subscribe(o=>{this.ref?.close(),p().fire("\xa1\xc9xito!","Los datos se registraron correctamente","success")},o=>{console.error("Error en la solicitud:",o),p().fire("Error","Hubo un problema al registrar el postulante","error")})}else console.error("Formulario inv\xe1lido")}closeModal(e){e.preventDefault(),this.ref?.close()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(s.ok),t.rXU(m.Pw),t.rXU(m.sb),t.rXU(E),t.rXU(v.V),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-ae-lista-postulantes"]],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"grid","p-fluid"],[1,"field","col-6"],[1,"p-float-label"],["type","text","pInputText","","formControlName","code"],["type","text","pInputText","","formControlName","codigo_puesto_asignado"],["type","text","pInputText","","formControlName","nombre"],["formControlName","genero",3,"options"],["type","text","pInputText","","formControlName","telefono"],["formControlName","fecha_nacimiento"],["type","number","pInputText","","formControlName","edad"],["type","email","pInputText","","formControlName","email"],["type","password","pInputText","","formControlName","contrasena"],["formControlName","doc_identidad","optionLabel","nombre","optionValue","id","placeholder","Seleccione un documento",3,"options"],["for","doc_identidad"],["type","text","pInputText","","formControlName","numero_documento"],["formControlName","estado_civil","optionLabel","nombre","optionValue","id","placeholder","Seleccione estado civil",3,"options"],["type","number","pInputText","","formControlName","numero_hijos"],["formControlName","grado_instruccion","optionLabel","nombre","optionValue","id","placeholder","Seleccione Grado de Instrucci\xf3n",3,"options"],[1,"field","col-6","input"],["formControlName","profesion","optionLabel","nombre","optionValue","id","placeholder","Seleccione Profesi\xf3n",3,"options"],["formControlName","ocupacion_actual","optionLabel","nombre","optionValue","id","placeholder","Seleccione Ocupaci\xf3n Actual",3,"options"],["mode","basic","chooseLabel","Adjunte documento","chooseIcon","pi pi-upload",3,"onSelect"],[4,"ngIf"],["formControlName","estado_actual","optionLabel","nombre","optionValue","id","placeholder","Seleccione Estado Actual",3,"options"],["formControlName","fecha_afiliacion"],[1,"flex","justify-content-end","flex-column","sm:flex-row"],[1,"flex","flex-wrap","gap-2"],["pButton","","icon","pi pi-plus","label","Guardar","iconPos","right","class","p-button-success p-button-sm","type","submit",4,"ngIf"],["pButton","","icon","pi pi-refresh","label","Actualizar","iconPos","right","class","p-button-warning p-button-sm","type","submit",4,"ngIf"],["pButton","","label","Cerrar","icon","pi pi-times","iconPos","right",1,"p-button-close-clean",3,"click"],[3,"postulanteId",4,"ngIf"],["tablaReferencia","datos_personales_postulante",3,"postulanteId",4,"ngIf"],["pButton","","icon","pi pi-plus","label","Guardar","iconPos","right","type","submit",1,"p-button-success","p-button-sm"],["pButton","","icon","pi pi-refresh","label","Actualizar","iconPos","right","type","submit",1,"p-button-warning","p-button-sm"],[3,"postulanteId"],["tablaReferencia","datos_personales_postulante",3,"postulanteId"]],template:function(o,a){1&o&&(t.j41(0,"p-panel"),t.DNE(1,Y,2,1,"ng-template",0),t.DNE(2,K,109,17,"ng-template",1),t.k0s())},dependencies:[s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD,d.bT,g.Z,_.Ei,P.Vv,h._f,u.S,b.ms,F.N,S,O.l,$._,B.G,A.k,V._],styles:["input[_ngcontent-%COMP%], p-dropdown[_ngcontent-%COMP%]{width:100%;display:flex}"]})}return n})();var j=i(9280);function W(n,r){1&n&&(t.j41(0,"span",2),t.EFF(1,"Listado de Postulantes"),t.k0s())}function q(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",18)(1,"button",19),t.bIt("click",function(){t.eBV(e);const a=t.XpG(3);return t.Njj(a.navigateAddPostulante())}),t.k0s()()}}function tt(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"span",14)(3,"input",15,16),t.bIt("input",function(a){t.eBV(e);const l=t.XpG(2);return t.Njj(l.onGlobalFilter(a))}),t.k0s()()(),t.DNE(5,q,2,0,"div",17),t.k0s()}if(2&n){const e=t.XpG(2);t.R7$(5),t.Y8G("ngIf",21!==e.helpersService.getRolId())}}function et(n,r){1&n&&(t.j41(0,"tr")(1,"th",20),t.EFF(2,"Acciones"),t.k0s(),t.j41(3,"th",20),t.EFF(4," C\xf3digo de Postulante "),t.k0s(),t.j41(5,"th",20),t.EFF(6," C\xf3digo de Puesto Asignado "),t.k0s(),t.j41(7,"th",20),t.EFF(8," Nombre "),t.k0s(),t.j41(9,"th",20),t.EFF(10," Tel\xe9fono "),t.k0s(),t.j41(11,"th",20),t.EFF(12," Documento de Identidad "),t.k0s(),t.j41(13,"th",20),t.EFF(14," Fecha de Afiliaci\xf3n "),t.k0s()())}function ot(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,l=t.XpG(2);return t.Njj(l.navigateToDelete(a.id))}),t.k0s()}}function nt(n,r){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"button",21),t.bIt("click",function(){const l=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.navigateToEdit(l))}),t.k0s(),t.DNE(3,ot,1,0,"button",22),t.k0s(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s(),t.j41(14,"td"),t.EFF(15),t.nI1(16,"date"),t.k0s()()}if(2&n){const e=r.$implicit,o=t.XpG(2);t.R7$(3),t.Y8G("ngIf",21!==o.helpersService.getRolId()),t.R7$(2),t.JRh(e.code),t.R7$(2),t.JRh(e.position_code),t.R7$(2),t.JRh(e.names),t.R7$(2),t.JRh(e.phone),t.R7$(2),t.JRh(e.identification_number),t.R7$(2),t.SpI(" ",t.i5U(16,7,e.date_affiliation,"dd/MM/yyyy")," ")}}function it(n,r){1&n&&(t.j41(0,"tr")(1,"td",24),t.EFF(2,"No se encontraron registros"),t.k0s()())}function at(n,r){1&n&&(t.j41(0,"tr")(1,"td",24),t.EFF(2," Cargando registros. Por favor espere. "),t.k0s()())}function st(n,r){if(1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"p-table",6,7),t.DNE(5,tt,6,1,"ng-template",8),t.DNE(6,et,15,0,"ng-template",0),t.DNE(7,nt,17,10,"ng-template",9),t.DNE(8,it,3,0,"ng-template",10),t.DNE(9,at,3,0,"ng-template",11),t.k0s()()()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("value",e.postulanteList)("rows",10)("loading",e.loading)("rowHover",!0)("paginator",!0)}}let lt=(()=>{class n{constructor(e,o,a){this.dialogService=e,this.helpersService=o,this.postulanteService=a,this.loading=!1,this.postulanteList=[],this.originalPostulanteList=[]}ngOnInit(){this.domain_id=this.helpersService.getDominioId(),this.postulante_id=this.helpersService.getPostulanteId(),this.listarPostulantesSegunRol()}listarPostulantesSegunRol(){this.loading=!0,8===this.helpersService.getRolId()?this.postulanteService.getPostulantes(this.domain_id).subscribe(o=>{this.postulanteList=o.data,this.originalPostulanteList=[...o.data],this.loading=!1}):this.postulanteService.getPostulanteById(this.postulante_id).subscribe(o=>{this.postulanteList=[o.cvBank],this.originalPostulanteList=[o.cvBank],this.loading=!1})}navigateAddPostulante(){this.ref=this.dialogService.open(C,{width:"60%",styleClass:"custom-dialog-header",data:{acciones:"add"}}),this.ref.onClose.subscribe(()=>{this.listarPostulantesSegunRol()})}navigateToDetalle(e){this.ref=this.dialogService.open(C,{width:"80%",styleClass:"custom-dialog-header",data:{acciones:"ver",data:e}})}navigateToEdit(e){this.ref=this.dialogService.open(C,{width:"60%",styleClass:"custom-dialog-header",data:{acciones:"actualizar",data:e,postulanteId:e.id}}),this.ref.onClose.subscribe(()=>{this.listarPostulantesSegunRol()})}navigateToDelete(e){p().fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s revertir esto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminarlo"}).then(o=>{o.isConfirmed&&this.postulanteService.eliminarPostulante(e).subscribe(()=>{p().fire("Eliminado","El registro ha sido eliminado.","success"),this.listarPostulantesSegunRol()},a=>{p().fire("Error","Hubo un problema al eliminar el registro.","error")})})}onGlobalFilter(e){const o=e.target.value.toLowerCase();this.postulanteList=o?this.originalPostulanteList.filter(a=>a.nombre.toLowerCase().includes(o)):[...this.originalPostulanteList]}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(m.o3),t.rXU(v.V),t.rXU(E))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-lista-postulantes"]],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[1,"row","mb-4"],[1,"grid","p-fluid"],[1,"field","md:col-12"],["styleClass","p-datatable-gridlines","responsiveLayout","scroll",1,"custom-search-input",3,"value","rows","loading","rowHover","paginator"],["dt1",""],["pTemplate","caption"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex-grow-1","mb-2","mr-2"],[1,"p-input-icon-left","w-full"],["pInputText","","type","text","placeholder","Buscar Postulantes",1,"w-full",3,"input"],["filter",""],["class","mb-2",4,"ngIf"],[1,"mb-2"],["pButton","","label","Nuevo","icon","pi pi-plus","id","btnNuevo",1,"p-button-primary","mr-2",2,"border-radius","30px",3,"click"],["scope","col",2,"min-width","10rem"],["pButton","","icon","pi pi-pencil","title","Editar",1,"p-button-rounded","p-button-text","p-button-warning",2,"width","70px","border-radius","30px",3,"click"],["pButton","","icon","pi pi-trash","style","width: 70px; border-radius: 30px","title","Eliminar","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pButton","","icon","pi pi-trash","title","Eliminar",1,"p-button-rounded","p-button-text","p-button-danger",2,"width","70px","border-radius","30px",3,"click"],["colspan","5"]],template:function(o,a){1&o&&(t.j41(0,"p-panel"),t.DNE(1,W,2,0,"ng-template",0),t.DNE(2,st,10,5,"ng-template",1),t.k0s())},dependencies:[d.bT,g.Z,_.Ei,h._f,j.XI,u.S,d.vh],styles:[".selects_content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.selects_content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selects_content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%], .selects_content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid rgb(136,133,133);border-radius:10px;margin-top:.4rem;width:14.5rem;padding:.8rem 1rem;outline:none}"]})}return n})(),rt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#o=this.\u0275inj=t.G2t({imports:[x.iI.forChild([{path:"",component:lt}]),x.iI]})}return n})();var ct=i(4714),pt=i(9266),ut=i(3973),dt=i(563),y=i(6296),mt=i(1579),T=i(9998),G=i(7835),ft=i(8542),ht=i(4799),gt=i(1142),vt=i(6781),_t=i(9664),bt=i(2274),Ft=i(2171),Ct=i(7434),jt=i(1506),It=i(7682),xt=i(7170);let Et=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#o=this.\u0275inj=t.G2t({imports:[s.X1,d.MD,g.b,rt,s.YN,P.rO,j.bG,ct.wZ,h.tm,pt.SW,u.u,k.f,ut.d0,dt.Z,y.iV,b.kr,mt.d,T.MB,G.H,F.e,ft.S,T.MB,j.bG,G.H,ht.F,F.e,gt.sv,vt.P,m.k_,_t.h,u.u,y.iV,bt.o,Ft.InformacionAcademicaModule,Ct.CapacitacionPostulanteModule,jt.ExperienciaLaboralModule,It.ReferenciasLaboralesModule,xt.ReferenciasFamiliaresModule]})}return n})()}}]);