"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[6251],{5783:(X,I,r)=>{r.r(I),r.d(I,{BandejaAlumnoModule:()=>ne});var p=r(177),a=r(9417),d=r(8763),j=r(950),c=r(5779),H=r(8032),m=r.n(H),o=r(7019),E=r(2100),B=r(3088),G=r(9664),D=r(1626),L=r(3587);let w=(()=>{class n{constructor(e,t,l){this.http=e,this.httpClientFormData=t,this.handler=l,this.baseUrl=`${L.c.API_BASE}`,this.urlparametro=`${L.c.API_BASE}`,this.httpOptions={headers:new D.Lr({"Content-Type":"application/json"})},this.httpClientFormData=new D.Qq(this.handler)}saveAlumno(e){return this.http.post(`${this.baseUrl}alumnos`,e)}getAlumnos(e){return this.http.get(`${this.baseUrl}alumnos/${e}`)}getLoggedAlumno(e,t){return this.http.get(`${this.baseUrl}alumnos/logged/${e}/${t}`)}deleteAlumno(e){return this.http.delete(`${this.baseUrl}alumnos/${e.id}/${e.domain_id}`)}editAlumno(e,t,l){return this.http.put(`${this.baseUrl}alumnos/${t}/${l}`,e)}showAlumno(e){return this.http.get(`${this.baseUrl}alumnos/logged/${e.id}/${e.domain_id}`)}static#o=this.\u0275fac=function(t){return new(t||n)(o.KVO(D.Qq),o.KVO(D.Qq),o.KVO(D.JV))};static#e=this.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var O=r(4789),Y=r(5046),x=r(6554),y=r(8774),P=r(612),T=r(1141),k=r(2242),V=r(8150),N=r(5473),S=r(9998),R=r(320);function W(n,s){1&n&&(o.j41(0,"span",2),o.EFF(1,"Registrar Alumno"),o.k0s())}function Z(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function q(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function oo(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function eo(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function to(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function no(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function lo(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function io(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1," Campo obligatorio * "),o.k0s())}function ao(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function ro(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function so(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Formato inv\xe1lido *"),o.k0s())}function mo(n,s){1&n&&(o.j41(0,"small",46),o.EFF(1,"Campo obligatorio *"),o.k0s())}function uo(n,s){1&n&&o.nrm(0,"ngx-spinner",47)}function co(n,s){if(1&n){const e=o.RV6();o.j41(0,"form",3),o.bIt("ngSubmit",function(){o.eBV(e);const l=o.XpG();return o.Njj(l.saveAlumno())}),o.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),o.nrm(5,"i",8)(6,"input",9),o.j41(7,"label",10),o.EFF(8,"C\xf3digo de Estudiante"),o.k0s()(),o.DNE(9,Z,2,0,"small",11),o.k0s(),o.j41(10,"div",6)(11,"span",12),o.nrm(12,"p-dropdown",13),o.j41(13,"label",14),o.EFF(14,"Tipo de documento de identidad"),o.k0s(),o.DNE(15,q,2,0,"small",11),o.k0s()()()(),o.j41(16,"div",4)(17,"div",5)(18,"div",6)(19,"span",7),o.nrm(20,"i",8)(21,"input",15),o.j41(22,"label",16),o.EFF(23,"Numero de Documento"),o.k0s()(),o.DNE(24,oo,2,0,"small",11),o.k0s(),o.j41(25,"div",6)(26,"span",7),o.nrm(27,"i",8)(28,"input",17),o.j41(29,"label",18),o.EFF(30,"Nombres"),o.k0s()(),o.DNE(31,eo,2,0,"small",11),o.k0s(),o.j41(32,"div",6)(33,"span",7),o.nrm(34,"i",8)(35,"input",19),o.j41(36,"label",20),o.EFF(37,"Apellidos"),o.k0s()(),o.DNE(38,to,2,0,"small",11),o.k0s(),o.j41(39,"div",6)(40,"span",7),o.nrm(41,"i",8)(42,"input",21),o.j41(43,"label",22),o.EFF(44,"Correo"),o.k0s()(),o.DNE(45,no,2,0,"small",11),o.k0s(),o.j41(46,"div",6)(47,"span",7),o.nrm(48,"i",8)(49,"input",23),o.j41(50,"label",24),o.EFF(51,"Clave"),o.k0s()(),o.DNE(52,lo,2,0,"small",11),o.k0s(),o.j41(53,"div",6)(54,"span",12),o.nrm(55,"p-dropdown",25),o.j41(56,"label",26),o.EFF(57,"Plan de estudio"),o.k0s(),o.DNE(58,io,2,0,"small",11),o.k0s()()()(),o.j41(59,"div",27)(60,"div",5)(61,"div",6)(62,"span",7),o.nrm(63,"i",8)(64,"input",28),o.j41(65,"label",29),o.EFF(66,"Direccion"),o.k0s()(),o.DNE(67,ao,2,0,"small",11),o.k0s(),o.j41(68,"div",6)(69,"span",7),o.nrm(70,"i",8)(71,"input",30),o.j41(72,"label",31),o.EFF(73,"Nro de Celular"),o.k0s()(),o.DNE(74,ro,2,0,"small",11),o.DNE(75,so,2,0,"small",11),o.k0s()()(),o.j41(76,"div",27)(77,"div",5)(78,"div",6)(79,"span",12),o.nrm(80,"p-dropdown",32),o.j41(81,"label",33),o.EFF(82,"Carrera Profesional"),o.k0s()()(),o.j41(83,"div",6)(84,"span",12),o.nrm(85,"p-dropdown",34),o.j41(86,"label",35),o.EFF(87,"Ciclos acad\xe9micos"),o.k0s()()()()(),o.j41(88,"div",27)(89,"div",5)(90,"div",6)(91,"span",12)(92,"p-calendar",36),o.bIt("onSelect",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.capturarFecha(l))}),o.k0s(),o.j41(93,"label",37),o.EFF(94,"Fecha de nacimiento"),o.k0s()(),o.DNE(95,mo,2,0,"small",11),o.k0s(),o.j41(96,"div",6)(97,"span",12),o.nrm(98,"p-dropdown",38),o.j41(99,"label",39),o.EFF(100,"Promociones"),o.k0s()()()()(),o.j41(101,"div",4)(102,"div",5)(103,"div",6),o.nrm(104,"p-toast"),o.j41(105,"p-fileUpload",40),o.bIt("onUpload",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onUpload(l))})("onSelect",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onPerfilSelect(l))}),o.k0s()(),o.j41(106,"div",6),o.nrm(107,"p-toast"),o.j41(108,"p-fileUpload",41),o.bIt("onUpload",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onUpload(l))})("onSelect",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onCarnetSelect(l))}),o.k0s()()()(),o.j41(109,"div",42),o.nrm(110,"button",43),o.j41(111,"button",44),o.bIt("click",function(){o.eBV(e);const l=o.XpG();return o.Njj(l.closeModal())}),o.k0s()()(),o.DNE(112,uo,1,0,"ngx-spinner",45)}if(2&n){const e=o.XpG();let t,l,i,u,h,g,f,_,v,F,b,C;o.Y8G("formGroup",e.alumnoForm),o.R7$(9),o.Y8G("ngIf",(null==(t=e.alumnoForm.get("codigo"))?null:t.invalid)&&(null==(t=e.alumnoForm.get("codigo"))?null:t.touched)),o.R7$(3),o.Y8G("autoDisplayFirst",!1)("options",e.tipodocu),o.R7$(3),o.Y8G("ngIf",(null==(l=e.alumnoForm.get("tipoDocumento"))?null:l.invalid)&&(null==(l=e.alumnoForm.get("tipoDocumento"))?null:l.touched)),o.R7$(9),o.Y8G("ngIf",(null==(i=e.alumnoForm.get("numeroDocumento"))?null:i.invalid)&&(null==(i=e.alumnoForm.get("numeroDocumento"))?null:i.touched)),o.R7$(7),o.Y8G("ngIf",(null==(u=e.alumnoForm.get("nombres"))?null:u.invalid)&&(null==(u=e.alumnoForm.get("nombres"))?null:u.touched)),o.R7$(7),o.Y8G("ngIf",(null==(h=e.alumnoForm.get("apellidos"))?null:h.invalid)&&(null==(h=e.alumnoForm.get("apellidos"))?null:h.touched)),o.R7$(7),o.Y8G("ngIf",(null==(g=e.alumnoForm.get("email"))?null:g.invalid)&&(null==(g=e.alumnoForm.get("email"))?null:g.touched)),o.R7$(7),o.Y8G("ngIf",(null==(f=e.alumnoForm.get("contrase\xf1a"))?null:f.invalid)&&(null==(f=e.alumnoForm.get("contrase\xf1a"))?null:f.touched)),o.R7$(3),o.Y8G("options",e.estadosList),o.R7$(3),o.Y8G("ngIf",(null==(_=e.alumnoForm.get("estadoId"))?null:_.invalid)&&(null==(_=e.alumnoForm.get("estadoId"))?null:_.touched)),o.R7$(9),o.Y8G("ngIf",(null==(v=e.alumnoForm.get("direccion"))?null:v.invalid)&&(null==(v=e.alumnoForm.get("direccion"))?null:v.touched)),o.R7$(7),o.Y8G("ngIf",(null==(F=e.alumnoForm.get("nroCelular"))?null:F.invalid)&&(null==(F=e.alumnoForm.get("nroCelular"))?null:F.touched)),o.R7$(1),o.Y8G("ngIf",(null==(b=e.alumnoForm.get("nroCelular"))?null:b.hasError("pattern"))&&(null==(b=e.alumnoForm.get("nroCelular"))?null:b.touched)),o.R7$(5),o.Y8G("options",e.carrerasList),o.R7$(5),o.Y8G("options",e.ciclosList),o.R7$(7),o.Y8G("showTime",!1)("showSeconds",!1),o.R7$(3),o.Y8G("ngIf",(null==(C=e.alumnoForm.get("fechaNacimiento"))?null:C.invalid)&&(null==(C=e.alumnoForm.get("fechaNacimiento"))?null:C.touched)),o.R7$(3),o.Y8G("options",e.promocionesList)("filter",!0),o.R7$(14),o.Y8G("ngIf",e.loading)}}let po=(()=>{class n{constructor(e,t,l,i,u,h,g,f,_,v,F,b,C){this.router=e,this.ref=t,this.cdr=l,this.config=i,this.parametroService=u,this.translate=h,this.messageService=g,this.alumnoService=f,this.commonService=_,this.promocionService=v,this.fb=F,this.spinner=b,this.helpersService=C,this.promocionesList=[],this.carrerasList=[],this.ciclosList=[],this.fechanacimiento=new Date,this.calendarOptions={initialView:"dayGridMonth",locale:j.A},this.loading=!1,this.estados=[],this.estado={},this.domain_id=1,this.estadosList=[],this.alumnoForm=this.fb.group({codigo:["",a.k0.required],tipoDocumento:["",a.k0.required],numeroDocumento:["",a.k0.required],nombres:["",a.k0.required],estadoId:["",a.k0.required],apellidos:["",a.k0.required],email:["",[a.k0.required,a.k0.email]],contrase\u00f1a:["",a.k0.required],nroCelular:["",[a.k0.required,a.k0.pattern(/^[0-9]{9}$/)]],carreraId:["",a.k0.required],cicloId:["",a.k0.required],direccion:[""],fechaNacimiento:[this.fechanacimiento,a.k0.required],promocionId:["",a.k0.required],fotoPerfil:[null],fotoCarnet:[null]})}onGlobalFilter(e,t){e.filterGlobal(t.target.value,"contains")}ngOnInit(){this.domain_id=this.helpersService.getDominioId(),this.listarPlanEstudio(),this.alumnoForm.get("estadoId")?.valueChanges.subscribe(e=>{e&&this.getCarrerasDropdown(e)}),this.tipodocu=[{name:"DNI",value:1,code:"NY"},{name:"PASAPORTE",value:2,code:"RM"}],this.translate?this.translateChange("es"):console.error("TranslateService is not initialized."),this.config.data&&(this.alumno=this.config.data.alumno,console.log("first"),console.log(this.alumno),this.alumno&&this.alumnoForm.patchValue({codigo:this.alumno.codigo,tipoDocumento:1,numeroDocumento:this.alumno.dni,nombres:this.alumno.nombres,apellidos:this.alumno.apellidos,email:this.alumno.email,nroCelular:this.alumno.celular,carreraId:this.alumno.carrera_id,cicloId:this.alumno.ciclo_id,contrase\u00f1a:this.alumno.contrase\u00f1a,promocionId:this.alumno.promocion_id,direccion:this.alumno.direccion,fechaNacimiento:new Date(this.alumno.fecha_nacimiento),fotoPerfil:this.alumno.foto_perfil,fotoCarnet:this.alumno.foto_carnet})),this.getCiclosDropdown(),this.getPromocionesDropdown()}listarPlanEstudio(){return new Promise((e,t)=>{this.parametroService.getEstadoDeCurso().subscribe(l=>{console.log("Lista de listarPlanEstudio",l),this.estadosList=l.map(i=>({name:i.nombre,value:i.id})),e()},l=>t(l))})}getCarrerasDropdown(e){this.commonService.getCarrerasDropdownByPlanDeEstudio(e).subscribe(t=>{this.carrerasList=t.map(l=>({name:l.nombres,value:l.id}))},t=>{console.error("Error obteniendo carreras",t)})}getPromocionesDropdown(){this.promocionService.getPromocionesByDomainId(this.domain_id).subscribe(e=>{this.promocionesList=e.data.map(t=>({name:t.nombre_promocion,value:t.id}))},e=>{console.error("Error obteniendo promociones",e)})}getAge(e){const t=new Date,l=new Date(e);let i=t.getFullYear()-l.getFullYear();const u=t.getMonth()-l.getMonth();return(u<0||0===u&&t.getDate()<l.getDate())&&i--,i}onCarnetSelect(e){this.alumnoForm.patchValue({fotoCarnet:e.files[0]})}onPerfilSelect(e){this.alumnoForm.patchValue({fotoPerfil:e.files[0]})}getCiclosDropdown(){this.commonService.getCiclosDropdown(this.domain_id).subscribe(e=>{this.ciclosList=e.map(t=>({name:t.nombre,value:t.id}))},e=>{console.error("Error obteniendo ciclos",e)})}cambiarIdioma(){this.translateService.use("es")}translateChange(e){this.translate?this.translate.use(e):console.error("TranslateService is not initialized.")}onUpload(e){this.messageService.add({severity:"info",summary:"Success",detail:"Archivo cargado correctamente"})}actualizarAlumno(){if(this.alumnoForm.valid){const e={codigo:this.alumnoForm.get("codigo")?.value,tipoDocumento:this.alumnoForm.get("tipoDocumento")?.value,numeroDocumento:this.alumnoForm.get("numeroDocumento")?.value,nombres:this.alumnoForm.get("nombres")?.value,apellidos:this.alumnoForm.get("apellidos")?.value,email:this.alumnoForm.get("email")?.value,nroCelular:this.alumnoForm.get("nroCelular")?.value,carreraId:this.alumnoForm.get("carreraId")?.value,estadoId:this.alumnoForm.get("estadoId")?.value,cicloId:this.alumnoForm.get("cicloId")?.value,contrase\u00f1a:this.alumnoForm.get("contrase\xf1a")?.value,direccion:this.alumnoForm.get("direccion")?.value,fechaNacimiento:this.alumnoForm.get("fechaNacimiento")?.value.toISOString().split("T")[0],promocion_id:this.alumnoForm.get("promocionId")?.value};console.log("Datos enviados como JSON:",e),this.loading=!0,this.spinner.show(),this.alumnoService.editAlumno(e,this.alumno.id,this.domain_id).subscribe(i=>{this.loading=!1,this.spinner.hide(),this.ref.close({register:!0}),m().fire({title:"\xa1\xc9xito!",text:"Alumno actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"})},i=>{this.loading=!1,this.spinner.hide(),m().fire({title:"\xa1Error!",text:"Hubo un error actualizando al alumno",icon:"error",confirmButtonText:"Aceptar"})})}}saveAlumno(){if(this.alumnoForm.valid){const e={codigo:this.alumnoForm.get("codigo")?.value,tipoDocumento:this.alumnoForm.get("tipoDocumento")?.value,numeroDocumento:this.alumnoForm.get("numeroDocumento")?.value,nombres:this.alumnoForm.get("nombres")?.value,apellidos:this.alumnoForm.get("apellidos")?.value,nroCelular:this.alumnoForm.get("nroCelular")?.value,carreraId:this.alumnoForm.get("carreraId")?.value,estadoId:this.alumnoForm.get("estadoId")?.value,cicloId:this.alumnoForm.get("cicloId")?.value,promocion_id:this.alumnoForm.get("promocionId")?.value,contrase\u00f1a:this.alumnoForm.get("contrase\xf1a")?.value,email:this.alumnoForm.get("email")?.value,direccion:this.alumnoForm.get("direccion")?.value,fechaNacimiento:this.alumnoForm.get("fechaNacimiento")?.value.toISOString().split("T")[0],fotoPerfil:null,fotoCarnet:null,domain_id:this.domain_id};console.log("Datos enviados:",e);let t=!1,l=!1;const i=()=>{t&&l&&this.registrarAlumno(e)};this.alumnoForm.get("fotoPerfil")?.value?this.convertImageToBase64(this.alumnoForm.get("fotoPerfil")?.value,u=>{e.fotoPerfil=u,t=!0,i()}):(t=!0,i()),this.alumnoForm.get("fotoCarnet")?.value?this.convertImageToBase64(this.alumnoForm.get("fotoCarnet")?.value,u=>{e.fotoCarnet=u,l=!0,i()}):(l=!0,i())}else m().fire({title:"\xa1Error!",text:"Por favor, complete todos los campos obligatorios.",icon:"error",confirmButtonText:"Aceptar"})}convertImageToBase64(e,t){const l=new FileReader;l.readAsDataURL(e),l.onload=()=>{t(l.result)},l.onerror=i=>{console.error("Error al convertir imagen a base64:",i)}}registrarAlumno(e){this.loading=!0,this.spinner.show(),console.log("Datos enviados:",e),this.alumnoService.saveAlumno(e).subscribe(t=>{this.loading=!1,this.spinner.hide(),this.ref.close({register:!0}),m().fire({title:"\xa1\xc9xito!",text:"Alumno registrado correctamente",icon:"success",confirmButtonText:"Aceptar"})},t=>{this.loading=!1,this.spinner.hide(),this.helpersService.showErrorMessage(t.error.message)})}capturarFecha(e){console.log("Fecha",e);let t=new Date(e);t instanceof Date&&t.toISOString().split("T"),this.alumnoForm.patchValue({fechaNacimiento:t})}closeModal(){this.ref.close({register:!1})}static#o=this.\u0275fac=function(t){return new(t||n)(o.rXU(d.Ix),o.rXU(E.Pw),o.rXU(o.gRc),o.rXU(E.sb),o.rXU(B.O),o.rXU(G.c$),o.rXU(c.bg),o.rXU(w),o.rXU(O.h),o.rXU(Y.C),o.rXU(a.ok),o.rXU(x.ex),o.rXU(y.V))};static#e=this.\u0275cmp=o.VBU({type:n,selectors:[["app-reg-alumno"]],features:[o.Jv_([c.bg])],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"grid","p-fluid"],[1,"field","md:col-6"],[1,"p-float-label","p-input-icon-left"],[1,"pi","pi-user-edit"],["type","text","id","codigo","pInputText","","formControlName","codigo"],["for","codigo"],["style","color: brown",4,"ngIf"],[1,"p-float-label"],["inputId","tipoDocumento","formControlName","tipoDocumento","optionLabel","name","optionValue","value",3,"autoDisplayFirst","options"],["for","tipoDocumento"],["type","text","id","numeroDocumento","pInputText","","formControlName","numeroDocumento"],["for","numeroDocumento"],["type","text","id","nombres","pInputText","","formControlName","nombres"],["for","nombres"],["type","text","id","apellidos","pInputText","","formControlName","apellidos"],["for","apellidos"],["type","text","id","email","pInputText","","formControlName","email"],["for","email"],["type","password","id","contrase\xf1a","pInputText","","formControlName","contrase\xf1a"],["for","contrase\xf1a"],["inputId","estadoId","formControlName","estadoId","optionLabel","name","optionValue","value","placeholder","Selecciona un estado",3,"options"],["for","estadoId"],[1,"row"],["type","text","id","direccion","pInputText","","formControlName","direccion"],["for","direccion"],["type","text","id","nroCelular","pInputText","","formControlName","nroCelular"],["for","nroCelular"],["inputId","carreraId","formControlName","carreraId","optionLabel","name","optionValue","value","placeholder","Selecciona una carrera",3,"options"],["for","carreraId"],["inputId","cicloId","formControlName","cicloId","optionLabel","name","optionValue","value","placeholder","Selecciona un ciclo",3,"options"],["for","cicloId"],["inputId","fechaNacimiento","formControlName","fechaNacimiento","dateFormat","dd-mm-yy",3,"showTime","showSeconds","onSelect"],["for","fechaNacimiento"],["inputId","promocionId","formControlName","promocionId","optionLabel","name","optionValue","value","placeholder","Selecciona una promoci\xf3n","filterPlaceholder","Buscar promoci\xf3n",3,"options","filter"],["for","promocionId"],["mode","basic","chooseLabel","Adjunte foto de Perfil","chooseIcon","pi pi-upload","name","demo[]","url","https://www.primefaces.org/cdn/api/upload.php","accept","image/*",3,"onUpload","onSelect"],["mode","basic","chooseLabel","Adjunte foto tama\xf1o carnet","chooseIcon","pi pi-upload","name","demo[]","url","https://www.primefaces.org/cdn/api/upload.php","accept","image/*",3,"onUpload","onSelect"],[1,"row","mb-5","text-right"],["pButton","","label","Guardar","icon","pi pi-plus","id","btnGuardar","type","submit",1,"p-button-success","mr-2"],["pButton","","label","Cancelar","icon","pi pi-times","id","btnCancelar",1,"p-button-danger",3,"click"],["bdColor","rgba(0,0,0,0.5)","size","large","color","#fff","type","ball-spin",4,"ngIf"],[2,"color","brown"],["bdColor","rgba(0,0,0,0.5)","size","large","color","#fff","type","ball-spin"]],template:function(t,l){1&t&&(o.j41(0,"p-panel"),o.DNE(1,W,2,0,"ng-template",0),o.DNE(2,co,113,23,"ng-template",1),o.k0s())},dependencies:[p.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,P.Vv,T._f,c.Ei,k.S,V.ms,N.Z,S.y8,R.N,x.et]})}return n})();var ho=r(4723);function go(n,s){1&n&&(o.j41(0,"span",2),o.EFF(1,"Actualizar Alumno"),o.k0s())}function fo(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function _o(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function vo(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function Fo(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function bo(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function Co(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function Eo(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function Io(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1," Campo obligatorio * "),o.k0s())}function jo(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function Ao(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function Do(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Formato inv\xe1lido *"),o.k0s())}function xo(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1," Debes seleccionar una carrera "),o.k0s())}function To(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1,"Campo obligatorio *"),o.k0s())}function ko(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1," Campo obligatorio * "),o.k0s())}function No(n,s){1&n&&(o.j41(0,"small",50),o.EFF(1," Campo obligatorio * "),o.k0s())}function So(n,s){1&n&&o.nrm(0,"ngx-spinner",51)}function Ro(n,s){if(1&n){const e=o.RV6();o.j41(0,"form",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),o.nrm(5,"i",8)(6,"input",9),o.j41(7,"label",10),o.EFF(8,"C\xf3digo de Estudiante"),o.k0s()(),o.DNE(9,fo,2,0,"small",11),o.k0s(),o.j41(10,"div",6)(11,"span",12),o.nrm(12,"p-dropdown",13),o.j41(13,"label",14),o.EFF(14,"Tipo de documento de identidad"),o.k0s(),o.DNE(15,_o,2,0,"small",11),o.k0s()()()(),o.j41(16,"div",4)(17,"div",5)(18,"div",6)(19,"span",7),o.nrm(20,"i",8)(21,"input",15),o.j41(22,"label",16),o.EFF(23,"Numero de Documento"),o.k0s()(),o.DNE(24,vo,2,0,"small",11),o.k0s(),o.j41(25,"div",6)(26,"span",7),o.nrm(27,"i",8)(28,"input",17),o.j41(29,"label",18),o.EFF(30,"Nombres"),o.k0s()(),o.DNE(31,Fo,2,0,"small",11),o.k0s(),o.j41(32,"div",6)(33,"span",7),o.nrm(34,"i",8)(35,"input",19),o.j41(36,"label",20),o.EFF(37,"Apellidos"),o.k0s()(),o.DNE(38,bo,2,0,"small",11),o.k0s(),o.j41(39,"div",6)(40,"span",7),o.nrm(41,"i",8)(42,"input",21),o.j41(43,"label",22),o.EFF(44,"Correo"),o.k0s()(),o.DNE(45,Co,2,0,"small",11),o.k0s(),o.j41(46,"div",6)(47,"span",7),o.nrm(48,"i",8)(49,"input",23),o.j41(50,"label",24),o.EFF(51,"Clave"),o.k0s()(),o.DNE(52,Eo,2,0,"small",11),o.k0s(),o.j41(53,"div",6)(54,"span",12),o.nrm(55,"p-dropdown",25),o.j41(56,"label",26),o.EFF(57,"Estado de la Unidad Didactica"),o.k0s(),o.DNE(58,Io,2,0,"small",11),o.k0s()()()(),o.j41(59,"div",27)(60,"div",5)(61,"div",6)(62,"span",7),o.nrm(63,"i",8)(64,"input",28),o.j41(65,"label",29),o.EFF(66,"Direccion"),o.k0s()(),o.DNE(67,jo,2,0,"small",11),o.k0s(),o.j41(68,"div",6)(69,"span",7),o.nrm(70,"i",8)(71,"input",30),o.j41(72,"label",31),o.EFF(73,"Nro de Celular"),o.k0s()(),o.DNE(74,Ao,2,0,"small",11),o.DNE(75,Do,2,0,"small",11),o.k0s()()(),o.j41(76,"div",27)(77,"div",5)(78,"div",6)(79,"span",12),o.nrm(80,"p-dropdown",32),o.j41(81,"label",33),o.EFF(82,"Carrera Profesional"),o.k0s(),o.DNE(83,xo,2,0,"small",34),o.k0s()(),o.j41(84,"div",6)(85,"span",12),o.nrm(86,"p-dropdown",35),o.j41(87,"label",36),o.EFF(88,"Ciclos acad\xe9micos"),o.k0s()()()()(),o.j41(89,"div",27)(90,"div",5)(91,"div",6)(92,"span",12)(93,"p-calendar",37),o.bIt("onSelect",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.capturarFecha(l))}),o.k0s(),o.j41(94,"label",38),o.EFF(95,"Fecha de nacimiento"),o.k0s()(),o.DNE(96,To,2,0,"small",11),o.k0s(),o.j41(97,"div",6)(98,"span",12),o.nrm(99,"p-dropdown",39),o.j41(100,"label",40),o.EFF(101,"Promociones"),o.k0s(),o.DNE(102,ko,2,0,"small",11),o.k0s()()()(),o.j41(103,"div",27)(104,"div",5)(105,"div",6)(106,"span",12),o.nrm(107,"p-dropdown",41),o.j41(108,"label",42),o.EFF(109,"Estado del alumno"),o.k0s(),o.DNE(110,No,2,0,"small",34),o.k0s()()()(),o.j41(111,"div",4)(112,"div",5)(113,"div",6),o.nrm(114,"p-toast"),o.j41(115,"p-fileUpload",43),o.bIt("onUpload",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onUpload(l))})("onSelect",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onPerfilSelect(l))}),o.k0s()(),o.j41(116,"div",6),o.nrm(117,"p-toast"),o.j41(118,"p-fileUpload",44),o.bIt("onUpload",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onUpload(l))})("onSelect",function(l){o.eBV(e);const i=o.XpG();return o.Njj(i.onCarnetSelect(l))}),o.k0s()()()(),o.j41(119,"div",45)(120,"button",46),o.bIt("click",function(){o.eBV(e);const l=o.XpG();return o.Njj(l.navigateToAvanceCurricular(l.alumno))}),o.k0s(),o.j41(121,"button",47),o.bIt("click",function(){o.eBV(e);const l=o.XpG();return o.Njj(l.actualizarAlumno())}),o.k0s(),o.j41(122,"button",48),o.bIt("click",function(){o.eBV(e);const l=o.XpG();return o.Njj(l.closeModal())}),o.k0s()()(),o.DNE(123,So,1,0,"ngx-spinner",49)}if(2&n){const e=o.XpG();let t,l,i,u,h,g,f,_,v,F,b,C,A,$,U,Q;o.Y8G("formGroup",e.alumnoForm),o.R7$(9),o.Y8G("ngIf",(null==(t=e.alumnoForm.get("codigo"))?null:t.invalid)&&(null==(t=e.alumnoForm.get("codigo"))?null:t.touched)),o.R7$(3),o.Y8G("autoDisplayFirst",!1)("options",e.tipodocu),o.R7$(3),o.Y8G("ngIf",(null==(l=e.alumnoForm.get("tipoDocumento"))?null:l.invalid)&&(null==(l=e.alumnoForm.get("tipoDocumento"))?null:l.touched)),o.R7$(9),o.Y8G("ngIf",(null==(i=e.alumnoForm.get("numeroDocumento"))?null:i.invalid)&&(null==(i=e.alumnoForm.get("numeroDocumento"))?null:i.touched)),o.R7$(7),o.Y8G("ngIf",(null==(u=e.alumnoForm.get("nombres"))?null:u.invalid)&&(null==(u=e.alumnoForm.get("nombres"))?null:u.touched)),o.R7$(7),o.Y8G("ngIf",(null==(h=e.alumnoForm.get("apellidos"))?null:h.invalid)&&(null==(h=e.alumnoForm.get("apellidos"))?null:h.touched)),o.R7$(7),o.Y8G("ngIf",(null==(g=e.alumnoForm.get("email"))?null:g.invalid)&&(null==(g=e.alumnoForm.get("email"))?null:g.touched)),o.R7$(7),o.Y8G("ngIf",(null==(f=e.alumnoForm.get("contrase\xf1a"))?null:f.invalid)&&(null==(f=e.alumnoForm.get("contrase\xf1a"))?null:f.touched)),o.R7$(3),o.Y8G("options",e.estadosList),o.R7$(3),o.Y8G("ngIf",(null==(_=e.alumnoForm.get("estadoId"))?null:_.invalid)&&(null==(_=e.alumnoForm.get("estadoId"))?null:_.touched)),o.R7$(9),o.Y8G("ngIf",(null==(v=e.alumnoForm.get("direccion"))?null:v.invalid)&&(null==(v=e.alumnoForm.get("direccion"))?null:v.touched)),o.R7$(7),o.Y8G("ngIf",(null==(F=e.alumnoForm.get("nroCelular"))?null:F.invalid)&&(null==(F=e.alumnoForm.get("nroCelular"))?null:F.touched)),o.R7$(1),o.Y8G("ngIf",(null==(b=e.alumnoForm.get("nroCelular"))?null:b.hasError("pattern"))&&(null==(b=e.alumnoForm.get("nroCelular"))?null:b.touched)),o.R7$(5),o.Y8G("options",e.carrerasList),o.R7$(3),o.Y8G("ngIf",(null==(C=e.alumnoForm.get("carreraId"))?null:C.invalid)&&(null==(C=e.alumnoForm.get("carreraId"))?null:C.touched)),o.R7$(3),o.Y8G("options",e.ciclosList),o.R7$(7),o.Y8G("showTime",!1)("showSeconds",!1),o.R7$(3),o.Y8G("ngIf",(null==(A=e.alumnoForm.get("fechaNacimiento"))?null:A.invalid)&&(null==(A=e.alumnoForm.get("fechaNacimiento"))?null:A.touched)),o.R7$(3),o.Y8G("options",e.promocionesList),o.R7$(3),o.Y8G("ngIf",(null==($=e.alumnoForm.get("promocionId"))?null:$.invalid)&&(null==($=e.alumnoForm.get("promocionId"))?null:$.touched)),o.R7$(5),o.Y8G("options",e.estadoAlumnoOptions),o.R7$(3),o.Y8G("ngIf",(null==(U=e.alumnoForm.get("estadoAlumno"))?null:U.invalid)&&(null==(U=e.alumnoForm.get("estadoAlumno"))?null:U.touched)),o.R7$(11),o.Y8G("disabled",e.alumnoForm.invalid||!(null!=(Q=e.alumnoForm.get("carreraId"))&&Q.value)),o.R7$(2),o.Y8G("ngIf",e.loading)}}let $o=(()=>{class n{constructor(e,t,l,i,u,h,g,f,_,v,F,b,C,A){this.router=e,this.ref=t,this.cdr=l,this.config=i,this.parametroService=u,this.dialogService=h,this.translate=g,this.messageService=f,this.alumnoService=_,this.commonService=v,this.promocionService=F,this.fb=b,this.spinner=C,this.helpersService=A,this.promocionesList=[],this.carrerasList=[],this.ciclosList=[],this.fechanacimiento=new Date,this.calendarOptions={initialView:"dayGridMonth",locale:j.A},this.loading=!1,this.domain_id=1,this.estadoAlumnoOptions=[{label:"EN PROCESO",value:"EN PROCESO"},{label:"RETIRADO",value:"RETIRADO"}],this.estadosList=[],this.alumnoForm=this.fb.group({codigo:["",a.k0.required],tipoDocumento:["",a.k0.required],numeroDocumento:["",a.k0.required],nombres:["",a.k0.required],promocionId:["",a.k0.required],estadoId:["",a.k0.required],apellidos:["",a.k0.required],email:["",[a.k0.required,a.k0.email]],nroCelular:["",[a.k0.required,a.k0.pattern(/^[0-9]{9}$/)]],carreraId:["",a.k0.required],cicloId:["",a.k0.required],direccion:[""],fechaNacimiento:[this.fechanacimiento,a.k0.required],fotoPerfil:[null],fotoCarnet:[null],estadoAlumno:["",a.k0.required],contrase\u00f1a:["",a.k0.required]}),this.domain_id=this.helpersService.getDominioId()}ngOnInit(){this.listarPlanEstudio(),this.alumnoForm.get("estadoId")?.valueChanges.subscribe(e=>{e&&this.getCarrerasDropdown(e)}),this.tipodocu=[{name:"DNI",value:1,code:"NY"},{name:"PASAPORTE",value:2,code:"RM"}],this.translate?this.translateChange("es"):console.error("TranslateService is not initialized."),this.config.data&&(this.alumno=this.config.data.alumno,this.alumno&&this.alumnoForm.patchValue({codigo:this.alumno.codigo,tipoDocumento:1,numeroDocumento:this.alumno.dni,nombres:this.alumno.nombres,apellidos:this.alumno.apellidos,email:this.alumno.email,nroCelular:this.alumno.celular,carreraId:this.alumno.carrera_id,cicloId:this.alumno.ciclo_id,estadoId:this.alumno.estado_id,contrase\u00f1a:this.alumno.contrase\u00f1a,promocionId:this.alumno.promocion_id,direccion:this.alumno.direccion,fechaNacimiento:new Date(this.alumno.fecha_nacimiento),fotoPerfil:this.alumno.foto_perfil,fotoCarnet:this.alumno.foto_carnet,estadoAlumno:this.alumno.estadoAlumno||"EN PROCESO"})),this.getCiclosDropdown(),this.getPromocionesDropdown()}listarPlanEstudio(){return new Promise((e,t)=>{this.parametroService.getEstadoDeCurso().subscribe(l=>{this.estadosList=l.map(i=>({name:i.nombre,value:i.id})),e()},l=>t(l))})}getCarrerasDropdown(e){this.commonService.getCarrerasDropdownByPlanDeEstudio(e).subscribe(t=>{this.carrerasList=t.map(l=>({name:l.nombres,value:l.id}))},t=>{console.error("Error obteniendo carreras",t)})}getCiclosDropdown(){this.commonService.getCiclosDropdown(this.domain_id).subscribe(e=>{this.ciclosList=e.map(t=>({name:t.nombre,value:t.id}))},e=>console.error("Error obteniendo ciclos",e))}getPromocionesDropdown(){this.promocionService.getPromocionesByDomainId(this.domain_id).subscribe(e=>{this.promocionesList=e.data.map(t=>({name:t.nombre_promocion,value:t.id}))},e=>console.error("Error obteniendo promociones",e))}navigateToAvanceCurricular(e){console.log("ALUMNO",this.alumno.id);const l={domain_id:e.domain_id??1,id:this.alumno.id};console.log("data",l),this.alumnoService.showAlumno(l).subscribe(i=>{this.ref=this.dialogService.open(ho.Z,{data:{alumno:i},width:"60%",styleClass:"custom-dialog-header"}),this.ref.onClose.subscribe(u=>{u&&console.log("Datos recibidos al cerrar el di\xe1logo:",u)})},i=>{console.error("Error al obtener los datos del alumno:",i)})}actualizarAlumno(){if(this.alumnoForm.valid){const e={codigo:this.alumnoForm.get("codigo")?.value,tipoDocumento:this.alumnoForm.get("tipoDocumento")?.value,dni:this.alumnoForm.get("numeroDocumento")?.value,nombres:this.alumnoForm.get("nombres")?.value,apellidos:this.alumnoForm.get("apellidos")?.value,email:this.alumnoForm.get("email")?.value,nroCelular:this.alumnoForm.get("nroCelular")?.value,carreraId:this.alumnoForm.get("carreraId")?.value,cicloId:this.alumnoForm.get("cicloId")?.value,estadoId:this.alumnoForm.get("estadoId")?.value,direccion:this.alumnoForm.get("direccion")?.value,fechaNacimiento:this.alumnoForm.get("fechaNacimiento")?.value.toISOString().split("T")[0],promocion_id:this.alumnoForm.get("promocionId")?.value,domain_id:this.domain_id,fotoPerfil:this.alumnoForm.get("fotoPerfil")?.value,fotoCarnet:this.alumnoForm.get("fotoCarnet")?.value,contrase\u00f1a:this.alumnoForm.get("contrase\xf1a")?.value,estadoAlumno:this.alumnoForm.get("estadoAlumno")?.value};console.log("Datos enviados como JSON:",e),this.loading=!0,this.spinner.show();const t=this.alumno.id;console.log("ALUMNO",t),this.alumnoService.editAlumno(e,t,this.domain_id).subscribe(i=>{this.loading=!1,this.spinner.hide(),this.ref.close({register:!0}),m().fire({title:"\xa1\xc9xito!",text:"Alumno actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"})},i=>{this.loading=!1,this.spinner.hide(),m().fire({title:"\xa1Error!",text:"Hubo un error actualizando al alumno",icon:"error",confirmButtonText:"Aceptar"})})}else m().fire({title:"\xa1Error!",text:"Por favor, complete todos los campos obligatorios.",icon:"error",confirmButtonText:"Aceptar"})}translateChange(e){this.translate?this.translate.use(e):console.error("TranslateService is not initialized.")}onUpload(e){this.messageService.add({severity:"info",summary:"Success",detail:"Archivo cargado correctamente"})}onPerfilSelect(e){this.convertImageToBase64(e.files[0],l=>{this.alumnoForm.patchValue({fotoPerfil:l})})}onCarnetSelect(e){this.convertImageToBase64(e.files[0],l=>{this.alumnoForm.patchValue({fotoCarnet:l})})}convertImageToBase64(e,t){const l=new FileReader;l.readAsDataURL(e),l.onload=()=>{t(l.result)},l.onerror=i=>{console.error("Error al convertir la imagen a base64:",i)}}capturarFecha(e){const t=new Date(e);this.alumnoForm.patchValue({fechaNacimiento:t})}closeModal(){this.ref.close({register:!1})}static#o=this.\u0275fac=function(t){return new(t||n)(o.rXU(d.Ix),o.rXU(E.Pw),o.rXU(o.gRc),o.rXU(E.sb),o.rXU(B.O),o.rXU(E.o3),o.rXU(G.c$),o.rXU(c.bg),o.rXU(w),o.rXU(O.h),o.rXU(Y.C),o.rXU(a.ok),o.rXU(x.ex),o.rXU(y.V))};static#e=this.\u0275cmp=o.VBU({type:n,selectors:[["app-edit-alumno"]],features:[o.Jv_([c.bg])],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[3,"formGroup"],[1,"row","mb-4"],[1,"grid","p-fluid"],[1,"field","md:col-6"],[1,"p-float-label","p-input-icon-left"],[1,"pi","pi-user-edit"],["type","text","id","codigo","pInputText","","formControlName","codigo"],["for","codigo"],["style","color: brown",4,"ngIf"],[1,"p-float-label"],["inputId","tipoDocumento","formControlName","tipoDocumento","optionLabel","name","optionValue","value",3,"autoDisplayFirst","options"],["for","tipoDocumento"],["type","text","id","numeroDocumento","pInputText","","formControlName","numeroDocumento"],["for","numeroDocumento"],["type","text","id","nombres","pInputText","","formControlName","nombres"],["for","nombres"],["type","text","id","apellidos","pInputText","","formControlName","apellidos"],["for","apellidos"],["type","text","id","email","pInputText","","formControlName","email"],["for","email"],["type","text","id","contrase\xf1a","pInputText","","formControlName","contrase\xf1a"],["for","contrase\xf1a"],["inputId","estadoId","formControlName","estadoId","optionLabel","name","optionValue","value","placeholder","Selecciona un estado",3,"options"],["for","estadoId"],[1,"row"],["type","text","id","direccion","pInputText","","formControlName","direccion"],["for","direccion"],["type","text","id","nroCelular","pInputText","","formControlName","nroCelular"],["for","nroCelular"],["inputId","carreraId","formControlName","carreraId","optionLabel","name","optionValue","value","placeholder","Selecciona una carrera",3,"options"],["for","carreraId"],["style","color: brown;",4,"ngIf"],["inputId","cicloId","formControlName","cicloId","optionLabel","name","optionValue","value","placeholder","Selecciona un ciclo",3,"options"],["for","cicloId"],["inputId","fechaNacimiento","formControlName","fechaNacimiento","dateFormat","dd-mm-yy",3,"showTime","showSeconds","onSelect"],["for","fechaNacimiento"],["inputId","promocionId","formControlName","promocionId","optionLabel","name","optionValue","value","placeholder","Selecciona una promoci\xf3n",3,"options"],["for","promocionId"],["inputId","estadoAlumno","formControlName","estadoAlumno","optionLabel","label","optionValue","value","placeholder","Selecciona estado",3,"options"],["for","estadoAlumno"],["mode","basic","chooseLabel","Adjunte foto de Perfil","chooseIcon","pi pi-upload","name","demo[]","url","https://www.primefaces.org/cdn/api/upload.php","accept","image/*",3,"onUpload","onSelect"],["mode","basic","chooseLabel","Adjunte foto tama\xf1o carnet","chooseIcon","pi pi-upload","name","demo[]","url","https://www.primefaces.org/cdn/api/upload.php","accept","image/*",3,"onUpload","onSelect"],[1,"row","mb-5","text-right"],["pButton","","label","Avance Curricular","icon","pi pi-refresh","id","btnnavigateToAvanceCurricular","type","button",1,"p-button-alert","mr-2",3,"click"],["pButton","","label","Actualizar","icon","pi pi-refresh","id","btnActualizar","type","button",1,"p-button-info","mr-2",3,"disabled","click"],["pButton","","label","Cancelar","icon","pi pi-times","id","btnCancelar",1,"p-button-danger",3,"click"],["bdColor","rgba(0,0,0,0.5)","size","large","color","#fff","type","ball-spin",4,"ngIf"],[2,"color","brown"],["bdColor","rgba(0,0,0,0.5)","size","large","color","#fff","type","ball-spin"]],template:function(t,l){1&t&&(o.j41(0,"p-panel"),o.DNE(1,go,2,0,"ng-template",0),o.DNE(2,Ro,124,27,"ng-template",1),o.k0s())},dependencies:[p.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,P.Vv,T._f,c.Ei,k.S,V.ms,N.Z,S.y8,R.N,x.et]})}return n})();var M=r(9280);const Uo=["filter"],Bo=["dt1"];function Go(n,s){1&n&&(o.j41(0,"span",2),o.EFF(1,"Vista de Alumnos en Administrador"),o.k0s())}function wo(n,s){if(1&n){const e=o.RV6();o.j41(0,"button",19),o.bIt("click",function(){o.eBV(e);const l=o.XpG(3);return o.Njj(l.navigateToNuevo())}),o.k0s()}}function yo(n,s){if(1&n){const e=o.RV6();o.j41(0,"div",12)(1,"div",13)(2,"span",14)(3,"input",15,16),o.bIt("input",function(l){o.eBV(e),o.XpG();const i=o.sdS(4),u=o.XpG();return o.Njj(u.onGlobalFilter(i,l))}),o.k0s()()(),o.j41(5,"div",17),o.DNE(6,wo,1,0,"button",18),o.k0s()()}if(2&n){const e=o.XpG(2);o.R7$(6),o.Y8G("ngIf",!e.esAlumno)}}function Po(n,s){1&n&&(o.j41(0,"tr")(1,"th",20),o.EFF(2,"C\xf3digo"),o.k0s(),o.j41(3,"th",20),o.EFF(4,"Nombre y Apellidos"),o.k0s(),o.j41(5,"th",20),o.EFF(6,"Estado"),o.k0s(),o.j41(7,"th",20),o.EFF(8,"Ciclo"),o.k0s(),o.j41(9,"th",20),o.EFF(10,"Carrera T\xe9cnica"),o.k0s(),o.j41(11,"th",20),o.EFF(12,"Promoci\xf3n"),o.k0s(),o.j41(13,"th",20),o.EFF(14,"Plan de Estudios"),o.k0s(),o.j41(15,"th",20),o.EFF(16,"Celular"),o.k0s(),o.j41(17,"th",20),o.EFF(18,"Acciones"),o.k0s()())}function Vo(n,s){if(1&n){const e=o.RV6();o.j41(0,"button",24),o.bIt("click",function(){o.eBV(e);const l=o.XpG().$implicit,i=o.XpG(2);return o.Njj(i.eliminarAlumno(l))}),o.k0s()}}function Xo(n,s){if(1&n){const e=o.RV6();o.j41(0,"tr")(1,"td"),o.EFF(2),o.k0s(),o.j41(3,"td"),o.EFF(4),o.k0s(),o.j41(5,"td"),o.EFF(6),o.k0s(),o.j41(7,"td"),o.EFF(8),o.k0s(),o.j41(9,"td"),o.EFF(10),o.k0s(),o.j41(11,"td"),o.EFF(12),o.k0s(),o.j41(13,"td"),o.EFF(14),o.k0s(),o.j41(15,"td"),o.EFF(16),o.k0s(),o.j41(17,"td")(18,"div",21)(19,"button",22),o.bIt("click",function(){const i=o.eBV(e).$implicit,u=o.XpG(2);return o.Njj(u.navigateToEditar(i))}),o.k0s(),o.DNE(20,Vo,1,0,"button",23),o.k0s()()()}if(2&n){const e=s.$implicit,t=o.XpG(2);o.R7$(2),o.JRh(e.codigo),o.R7$(2),o.Lme("",e.nombres," ",e.apellidos,""),o.R7$(2),o.JRh(e.estadoAlumno),o.R7$(2),o.JRh(e.ciclo_nombre),o.R7$(2),o.JRh(e.carrera_nombre),o.R7$(2),o.JRh(e.promocion_nombre),o.R7$(2),o.JRh(e.estado_nombre),o.R7$(2),o.JRh(e.celular),o.R7$(4),o.Y8G("ngIf",!t.esAlumno)}}function Lo(n,s){1&n&&(o.j41(0,"tr")(1,"td",25),o.EFF(2,"No se encontraron registros"),o.k0s()())}function Oo(n,s){1&n&&(o.j41(0,"tr")(1,"td",25),o.EFF(2,"Cargando registros. Por favor espere."),o.k0s()())}const Yo=function(){return["nombres","institucion","carrera_nombre","ciclo_nombre"]};function Mo(n,s){if(1&n&&(o.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"p-table",6,7),o.DNE(5,yo,7,1,"ng-template",8),o.DNE(6,Po,19,0,"ng-template",0),o.DNE(7,Xo,21,10,"ng-template",9),o.DNE(8,Lo,3,0,"ng-template",10),o.DNE(9,Oo,3,0,"ng-template",11),o.k0s()()()()),2&n){const e=o.XpG();o.R7$(3),o.Y8G("value",e.instituciones)("rows",10)("loading",e.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",o.lJ4(6,Yo))}}let zo=(()=>{class n{constructor(e,t,l,i,u){this.dialogService=e,this.maestroService=t,this.alumnoService=l,this.helpersService=i,this.router=u,this.instituciones=[],this.loading=!1,this.domain_id=1,this.esAlumno=!1}ngOnInit(){this.domain_id=this.helpersService.getDominioId();const e=this.helpersService.getAlumnoId();e&&this.navigateToEditar({domain_id:this.domain_id,id:e}),this.esAlumno=12===this.helpersService.getRolId(),this.cargaInicial()}cargaInicial(){const e=12===this.helpersService.getRolId();if(this.loading=!0,e){const t=this.helpersService.getAlumnoId();t&&this.alumnoService.getLoggedAlumno(t,this.domain_id).subscribe(l=>{console.log("Data del alumno:",l),this.instituciones=[l],this.loading=!1},l=>{this.loading=!1,m().fire({title:"Error",text:"Error al cargar los datos del alumno",icon:"error"})})}else this.alumnoService.getAlumnos(this.domain_id).subscribe(t=>{console.log("Data de los alumno:",t),this.instituciones=t,this.loading=!1},t=>{this.loading=!1})}eliminarAlumno(e){m().fire({title:"Desea eliminar el alumno?",text:"No podr\xe1 revertir esta acci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&this.alumnoService.deleteAlumno({domain_id:e.domain_id??1,id:e.id}).subscribe(i=>{m().fire({title:"\xa1\xc9xito!",text:"eliminado correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{this.cargaInicial()},u=>{this.loading=!1,m().fire({title:"\xa1Error!",text:"Error al eliminar",icon:"error",confirmButtonText:"Aceptar"})})})})}navigateToNuevo(){this.ref=this.dialogService.open(po,{width:"60%",styleClass:"custom-dialog-header"}),this.ref.onClose.subscribe(e=>{e&&e.register&&this.cargaInicial(),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload"})}navigateToEditar(e){this.alumnoService.showAlumno({domain_id:e.domain_id??1,id:e.id}).subscribe(l=>{this.ref=this.dialogService.open($o,{data:{alumno:l},width:"60%",styleClass:"custom-dialog-header"}),this.ref.onClose.subscribe(i=>{i&&i.register&&this.cargaInicial(),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload"})})}onGlobalFilter(e,t){e&&(console.log("Organo-colegaido-sect"),e.filterGlobal(t.target.value,"contains"))}onRowSelect(e){console.log("Organo-colegaido-sect")}onRowUnselect(e){}static#o=this.\u0275fac=function(t){return new(t||n)(o.rXU(E.o3),o.rXU(B.O),o.rXU(w),o.rXU(y.V),o.rXU(d.Ix))};static#e=this.\u0275cmp=o.VBU({type:n,selectors:[["app-bandeja-alumno"]],viewQuery:function(t,l){if(1&t&&(o.GBs(Uo,5),o.GBs(Bo,5)),2&t){let i;o.mGM(i=o.lsd())&&(l.filter=i.first),o.mGM(i=o.lsd())&&(l.tabledt1=i.first)}},decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[1,"row","mb-4"],[1,"grid","p-fluid"],[1,"field","md:col-12"],["styleClass","p-datatable-gridlines","responsiveLayout","scroll",1,"custom-search-input",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex-grow-1","mb-2","mr-2"],[1,"p-input-icon-left","w-full"],["pInputText","","type","text","placeholder","Buscar Alumno",1,"w-full",3,"input"],["filter",""],[1,"mb-2"],["pButton","","label","Nuevo","icon","pi pi-user-plus","id","btnNuevo","class","p-button-primary mr-2","style","border-radius: 30px;",3,"click",4,"ngIf"],["pButton","","label","Nuevo","icon","pi pi-user-plus","id","btnNuevo",1,"p-button-primary","mr-2",2,"border-radius","30px",3,"click"],["scope","col",2,"min-width","10rem"],[1,"flex","justify-content-between","align-items-center"],["pButton","","icon","pi pi-pencil",1,"p-button-info","p-button-sm",3,"click"],["pButton","","icon","pi pi-trash","class","p-button-danger p-button-sm",3,"click",4,"ngIf"],["pButton","","icon","pi pi-trash",1,"p-button-danger","p-button-sm",3,"click"],["colspan","9"]],template:function(t,l){1&t&&(o.j41(0,"p-panel"),o.DNE(1,Go,2,0,"ng-template",0),o.DNE(2,Mo,10,7,"ng-template",1),o.k0s())},dependencies:[p.bT,T._f,c.Ei,M.XI,k.S,N.Z]})}return n})(),Jo=(()=>{class n{static#o=this.\u0275fac=function(t){return new(t||n)};static#e=this.\u0275mod=o.$C({type:n});static#t=this.\u0275inj=o.G2t({imports:[d.iI.forChild([{path:"",component:zo}]),d.iI]})}return n})();var Ko=r(3973),z=r(563),J=r(6296),Qo=r(1579),Ho=r(9266),Wo=r(4714),K=r(7835),Zo=r(1305),qo=r(8542),oe=r(4799),ee=r(6781),te=r(1142);let ne=(()=>{class n{static#o=this.\u0275fac=function(t){return new(t||n)};static#e=this.\u0275mod=o.$C({type:n});static#t=this.\u0275inj=o.G2t({providers:[c.bg],imports:[p.MD,Jo,a.X1,a.YN,P.rO,M.bG,Wo.wZ,T.tm,Ho.SW,k.u,Zo.f,Ko.d0,z.Z,J.iV,V.kr,N.b,Qo.d,S.MB,K.H,R.e,qo.S,S.MB,K.H,oe.F,R.e,ee.P,E.k_,G.h,z.Z,J.iV,te.sv,x.PO]})}return n})()},4789:(X,I,r)=>{r.d(I,{h:()=>j});var p=r(1626),a=r(3587),d=r(7019);let j=(()=>{class c{constructor(m,o,E){this.http=m,this.httpClientFormData=o,this.handler=E,this.baseUrl=`${a.c.API_BASE}`,this.urlparametro=`${a.c.API_BASE}`,this.httpOptions={headers:new p.Lr({"Content-Type":"application/json"})},this.httpClientFormData=new p.Qq(this.handler)}getCarrerasDropdown(m){return this.http.get(`${this.baseUrl}carreras-dropdown/${m}`)}getCarrerasDropdownByPlanDeEstudio(m){return this.http.get(`${this.baseUrl}carreras-dropdown/${m}`)}getCiclosDropdown(m){return this.http.get(`${this.baseUrl}ciclos-dropdown/${m}`)}getRolesDropdown(){return this.http.get(`${this.baseUrl}roles-dropdown`)}getDocentesDropdown(m){return this.http.get(`${this.baseUrl}docentes-dropdown/${m}`)}getInstitutionsDropdown(){return this.http.get(`${this.baseUrl}institutions-dropdown`)}static#o=this.\u0275fac=function(o){return new(o||c)(d.KVO(p.Qq),d.KVO(p.Qq),d.KVO(p.JV))};static#e=this.\u0275prov=d.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},5489:(X,I,r)=>{r.d(I,{Y:()=>j});var p=r(1626),a=r(3587),d=r(7019);let j=(()=>{class c{constructor(m,o,E){this.http=m,this.httpClientFormData=o,this.handler=E,this.baseUrl=`${a.c.API_BASE}`,this.urlparametro=`${a.c.API_BASE}`,this.httpOptions={headers:new p.Lr({"Content-Type":"application/json"})},this.httpClientFormData=new p.Qq(this.handler)}getCursosPorAlumno(m){return this.http.get(`${this.baseUrl}cursos-alumno/${m}`)}getCursosPorDomain(m){return this.http.get(`${this.baseUrl}cursos/domain/${m}`,this.httpOptions)}updateCursoEstado(m){return this.http.put(`${this.baseUrl}curso/estado`,m)}static#o=this.\u0275fac=function(o){return new(o||c)(d.KVO(p.Qq),d.KVO(p.Qq),d.KVO(p.JV))};static#e=this.\u0275prov=d.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);